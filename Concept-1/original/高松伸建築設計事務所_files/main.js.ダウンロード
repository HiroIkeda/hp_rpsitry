!function(){"use strict";var e,t={827:function(e,t,i){const s="is-active",n="is-enter",o="is-leave",a="is-loaded",r="is-hidden",l="is-disabled",h="is-hover",c="customBreakPoint",d="customResize",u="customResizeCanvas",p="customResizeFrame",m="customScroll",v="customToggleMenu",g="customOpenMenu",f="customCloseMenu",y="customOpenMovie",w="customCloseMovie",x="customPointerStart",b="customPointerMove",S="customPointerEnd",E="customPointerChange",L="not-found",P="philosophy",A="project-archive",k="project-archive-paged",M="project-archive-category",C="project-archive-category-paged",O="project-single",_="about",I="company",z="careers",T="news-archive",q="news-archive-paged",R="news-archive-category",D="news-archive-category-paged",Y="news-single",j="movie",F="movie-paged",$="movie-category",H="movie-category-paged",B="gallery",G="gallery-paged",V="gallery-category",N="gallery-category-paged",X="gallery-tag",W="gallery-tag-paged",U="contact",Z="contact-complete",K="privacy-policy",J="/wp-content/themes/takamatsu/assets",Q=`${J}/images`,ee=`${J}/images/common/textures`;class te{constructor(){this.el={canvas:document.querySelector(".l-stage"),frame:document.querySelector(".l-main")},this.data={width:0,height:0,canvas:{width:0,height:0},frame:{width:0,height:0},isSmall:!1,suffix:"pc"},this._init()}_init(){this._handleWindowEvent()}_getWindowDataSize(){const e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;this.data.canvas.width=this.el.canvas.clientWidth,this.data.canvas.height=this.el.canvas.clientHeight,this.data.frame.width=this.el.frame.clientWidth,this.data.frame.height=this.el.frame.clientHeight,this.data.width===e&&this.data.height===t||(this.data.width=e,this.data.height=t,window.dispatchEvent(new CustomEvent(d,{detail:{width:e,height:t}})))}_updateMediaQuery(){const e=window.matchMedia("(max-width: 834px)");e.onchange=e=>{this.data.isSmall=e.matches,this.data.suffix=this.data.isSmall?"sp":"pc",window.dispatchEvent(new CustomEvent(c))},this.data.isSmall=e.matches,this.data.suffix=this.data.isSmall?"sp":"pc"}_watchCanvasSize(){this.data.canvas.width=this.el.canvas.clientWidth,this.data.canvas.height=this.el.canvas.clientHeight,new ResizeObserver((()=>{this.data.canvas.width=this.el.canvas.clientWidth,this.data.canvas.height=this.el.canvas.clientHeight,window.dispatchEvent(new CustomEvent(u,{detail:{width:this.data.canvas.width,height:this.data.canvas.height}}))})).observe(this.el.canvas)}_watchFrameSize(){this.data.frame.width=this.el.frame.clientWidth,this.data.frame.height=this.el.frame.clientHeight,new ResizeObserver((()=>{this.data.frame.width=this.el.frame.clientWidth,this.data.frame.height=this.el.frame.clientHeight,window.dispatchEvent(new CustomEvent(p,{detail:{width:this.data.frame.width,height:this.data.frame.height}}))})).observe(this.el.frame)}_handleWindowEvent(){this._getWindowDataSize(),this._updateMediaQuery(),this._watchCanvasSize(),this._watchFrameSize(),window.addEventListener("resize",(()=>this._getWindowDataSize()))}}let ie=null;function se(){if(ie)return ie;const e=new te;return ie=e.data,ie}let ne=null;function oe({useCache:e=!0}={}){return e&&ne||(ne=(()=>{const e=window.navigator.userAgent.toLowerCase(),t=(e,t)=>Math.round(parseFloat(e)*Math.pow(10,t))/Math.pow(10,t),i={userAgent:e,type:"",isMobile:!1,browser:{app:"",version:""},device:{os:"",version:""}};let s;if(-1!==e.indexOf("windows")&&-1!==e.indexOf("touch")&&-1===e.indexOf("tablet pc"))i.type="tablet",i.device.os="windows tablet";else if(-1!==e.indexOf("windows phone"))s=/windows phone ([\d.]+)/.exec(e),i.type="mobile",i.device.os="windows phone",i.device.version=t(s?s[1]:"",1);else if(-1!==e.indexOf("ipad"))s=/os (\w+){1,3}/g.exec(e),i.type="tablet",i.device.os="ios",i.device.version=t((s?s[1]:"").replace(/_/g,"."),1);else if(-1!==e.indexOf("iphone")||-1!==e.indexOf("ipod"))-1!==e.indexOf("opera")?i.device.version="":(s=/iphone os (\w+){1,3}/g.exec(e),i.device.version=t((s?s[1]:"").replace(/_/g,"."),1)),i.type="mobile",i.device.os="ios";else if(-1!==e.indexOf("android")&&-1!==e.indexOf("mobile"))s=/android ([\d.]+)/.exec(e),i.type="mobile",i.device.os="android",i.device.version=t(s?s[1]:"",1);else if(-1!==e.indexOf("android"))s=/android ([\d.]+)/.exec(e),i.type="tablet",i.device.os="android",i.device.version=t(s?s[1]:"",1);else if(-1!==e.indexOf("bb10")||-1!==e.indexOf("blackberry"))i.type="mobile",i.device.os="blackberry",-1!==e.indexOf("bb10")?i.device.version="bb10":(s=/blackberry ([\d.]+)/.exec(e),i.device.version=s?s[1]:"");else if(-1!==e.indexOf("playbook"))i.type="tablet",i.device.os="blackberry",i.device.version="playbook";else if(-1!==e.indexOf("windows")){s=/windows nt ([\d.]+)/.exec(e),i.type="pc",i.device.os="windows";const t=s?s[1]:"";"10.0"===t?i.device.version=10:"6.3"===t?i.device.version=8.1:"6.2"===t?i.device.version=8:"6.1"===t?i.device.version=7:"6.0"===t?i.device.version="vista":("5.2"===t||"5.1"===t)&&(i.device.version="xp")}else-1!==e.indexOf("macintosh")&&(s=/mac os x ([\d.]+)/.exec(e),i.device.version=parseFloat(s?s[1]:""),"ontouchend"in document?(i.type="tablet",i.device.os="ios"):(i.type="pc",i.device.os="mac"));return e.indexOf("msie")>=0||e.indexOf("trident")>=0?(s=/(msie|rv:?)\s?([\d.]+)/.exec(e),i.browser.app="ie",i.browser.version=s?parseFloat(s[2]):""):(-1!==e.indexOf("edge")?(s=/edge\/([\d.]+)/.exec(e),i.browser.app="edge"):-1!==e.indexOf("firefox")||-1!==e.indexOf("fxios")?(s=-1!==e.indexOf("firefox")?/firefox\/([\d.]+)/.exec(e):/fxios\/([\d.]+)/.exec(e),i.browser.app="firefox"):-1!==e.indexOf("opera")&&-1!==e.indexOf("version")||-1!==e.indexOf("opr")?(s=-1!==e.indexOf("version")?/version\/([\d.]+)/.exec(e):/opr\/([\d.]+)/.exec(e),i.browser.app="opera"):-1!==e.indexOf("chrome")||-1!==e.indexOf("crios")?(s=-1!==e.indexOf("chrome")?/chrome\/([\d.]+)/.exec(e):/crios\/([\d.]+)/.exec(e),i.browser.app="chrome"):-1!==e.indexOf("bb10")||-1!==e.indexOf("blackberry")||-1!==e.indexOf("playbook")?(s=-1!==e.indexOf("blackberry")?/blackberry ([\d.]+)/.exec(e):void 0,i.browser.app="blackberry"):-1!==e.indexOf("android")&&-1!==e.indexOf("mobile")?(s=/android ([\d.]+)/.exec(e),i.browser.app="android"):-1!==e.indexOf("safari")&&-1!==e.indexOf("version")&&(s=/version\/([\d.]+)/.exec(e),i.browser.app="safari"),i.browser.version=s?parseFloat(s[1]):""),i.isMobile=["ios","android"].includes(i.device.os),i})()),ne}function ae(){const e=se();document.documentElement.style.setProperty("--vw",`${e.width}px`),document.documentElement.style.setProperty("--vh",`${e.height}px`),document.documentElement.style.setProperty("--full-vh",`${e.canvas.height}px`)}function re(e,t){return e.includes(t)}function le(e,t){return Math.random()*(t-e)+e}function he(){return Math.random()>=.5?1:-1}function ce(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function de(e,t,i){return Math.min(Math.max(e,t),i)}const ue=e=>{let t="";if(se().isSmall){const i=e.querySelector("source");i&&(t=i.srcset)}else{const i=e.querySelector("img");i&&(t=i.src)}return t},pe=e=>new Promise((t=>setTimeout(t,e))),me=e=>new Promise((t=>{if(e())return void t();let i=null,s=null;const n=()=>{i&&(clearInterval(i),i=null),s&&(clearTimeout(s),s=null)};i=window.setInterval((()=>{e()&&(n(),t())}),500),s=window.setTimeout((()=>{e()||(n(),t(),console.error("Taking too long to load."))}),2e4)}));class ve{constructor(){this.listeners=[]}createDefs(e,t,i){const s=document.createElementNS("http://www.w3.org/2000/svg","defs");s.innerHTML='\n      <linearGradient>\n        <stop offset="0%" stop-color="#fff" stop-opacity="0" />\n        <stop offset="35%" stop-color="#fff" stop-opacity="0.2" />\n        <stop offset="50%" stop-color="#fff" stop-opacity="1" />\n        <stop offset="65%" stop-color="#fff" stop-opacity="0.2" />\n        <stop offset="100%" stop-color="#fff" stop-opacity="0" />\n      </linearGradient>\n      <mask>\n        <rect x="0" y="0" width="0" height="0" class="c-button-border-mask" />\n      </mask>\n    ';const n=s.querySelector("linearGradient"),o=s.querySelector("mask"),a=s.querySelector("rect");return null==n||n.setAttribute("id",`button-mask-gradient-${i}`),null==o||o.setAttribute("id",`button-mask-${i}`),null==a||a.setAttribute("x",(-.5*e).toString()),null==a||a.setAttribute("y",(-1.5*t).toString()),null==a||a.setAttribute("width",(2*e).toString()),null==a||a.setAttribute("height",(4*t).toString()),null==a||a.setAttribute("fill",`url(#button-mask-gradient-${i})`),s}update(e){this.off();const t=this.createGradient(e);return this.on(t),t}createGradient(e){return Array.from(e.querySelectorAll(".c-button svg")).forEach((e=>{var t;const i=function(e=8){return Math.random().toString(16).substring(2,2+e)}(),s=e.getAttribute("width"),n=e.getAttribute("height");if(s&&n){const o=this.createDefs(parseInt(s,10),parseInt(n,10),i);e.appendChild(o),null===(t=e.querySelector("ellipse"))||void 0===t||t.setAttribute("mask",`url(#button-mask-${i})`)}})),e}on(e){Array.from(e.querySelectorAll(".c-button-hover")).forEach((e=>{const t=e.querySelector("mask rect");if(!t)return;const i=()=>{this.roundButtonGradient(t)};e.addEventListener("mouseenter",i),this.listeners.push({el:e,listener:i})}))}off(){this.listeners.forEach((({el:e,listener:t})=>{e&&e.removeEventListener("mouseenter",t)})),this.listeners=[]}roundButtonGradient(e){return t=this,i=void 0,n=function*(){e.classList.remove(h),yield pe(32),e.classList.add(h)},new((s=void 0)||(s=Promise))((function(e,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function r(e){try{l(n.throw(e))}catch(e){o(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(a,r)}l((n=n.apply(t,i||[])).next())}));var t,i,s,n}}function ge(){Array.from(document.querySelectorAll(".l-main")).forEach((e=>{e.classList.remove(r)}))}var fe=i(642),ye=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};class we{constructor(){this.el={loading:document.querySelector(".l-loading-progress"),front:{svg:document.querySelector(".l-loading-icon--front"),path:document.querySelector(".l-loading-icon--front path")},back:{svg:document.querySelector(".l-loading-icon--back"),path:document.querySelector(".l-loading-icon--back path")}},this.pathLength=0,this.isHiding=!1,this.tween={progress:0}}show(){this.pathLength=this.el.front.path.getTotalLength(),this.el.front.path.style.strokeDasharray=this.pathLength.toString(),this.el.front.path.style.strokeDashoffset=(3*this.pathLength).toString(),this.el.back.path.style.strokeDasharray=this.pathLength.toString(),this.el.back.path.style.strokeDashoffset="0"}progress(e){return ye(this,void 0,void 0,(function*(){e<1?yield fe.p8.to(this.el.front.path,{strokeDashoffset:this.pathLength*(3-e),duration:.8,ease:"power3.out"}).then():(yield fe.p8.to(this.el.front.path,{strokeDashoffset:2*this.pathLength,duration:1,ease:"power3.inOut"}).then(),yield this.hide())}))}hide(){return ye(this,void 0,void 0,(function*(){this.isHiding||(this.isHiding=!0,yield Promise.all([fe.p8.fromTo(this.el.loading,{rotation:0},{rotation:360,duration:1.6,ease:"expo.inOut"}).then(),fe.p8.to(this.el.front.path,{strokeDashoffset:this.pathLength,duration:1.5,ease:"power3.inOut"}).then(),fe.p8.fromTo(this.el.back.path,{strokeDashoffset:2*this.pathLength},{strokeDashoffset:this.pathLength,duration:1.6,delay:.2,ease:"expo.inOut"}).then()]),this.isHiding=!1)}))}}class xe{constructor(){this.el={loading:document.querySelector(".l-loading"),logo:document.querySelector(".l-loading-logo")},this.loadingProgress=new we,this.loadingProgress.show()}progress(e){return t=this,i=void 0,n=function*(){const t=e.length;let i=0;for(const s of e)s.then((()=>{i++;const e=i/t;this.loadingProgress.progress(e)}));yield Promise.all(e),this.el.loading.classList.add(a)},new((s=void 0)||(s=Promise))((function(e,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function r(e){try{l(n.throw(e))}catch(e){o(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(a,r)}l((n=n.apply(t,i||[])).next())}));var t,i,s,n}hideAtPhilosophy(){this.el.logo.addEventListener("transitionend",(()=>{this.el.loading.remove(),document.documentElement.classList.add(a)})),this.el.loading.classList.add(o)}hideAtSecondary(){this.el.loading.addEventListener("transitionend",(e=>{e.target===this.el.loading&&(this.el.loading.remove(),document.documentElement.classList.add(a))})),this.el.loading.classList.add("is-secondary"),this.el.loading.classList.add(o),ge()}}let be=null;function Se(){return be||(be=new xe,be)}class Ee{constructor(){this.mouseenter=()=>{return e=this,t=void 0,s=function*(){this.el.menu.classList.remove(h),yield pe(32),this.el.menu.classList.add(h)},new((i=void 0)||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}));var e,t,i,s},this.el=this.findElements(),this.isActive=!1,this.isEntered=!1,this.isHover=!1,this.isHoverAnimating=!1}init(){this.on()}on(){this.el.menu.addEventListener("mouseenter",this.mouseenter),this.el.menu.addEventListener("click",(()=>{window.dispatchEvent(new CustomEvent(v))}))}enter(){this.isEntered||(this.isEntered=!0,this.el.menu.classList.remove(o),this.el.menu.classList.add(n))}leave(){this.isEntered&&(this.isEntered=!1,this.el.menu.classList.add(o))}open(){this.isActive||(this.isActive=!0,this.el.menu.classList.add(s))}close(){this.isActive&&(this.isActive=!1,this.el.menu.classList.remove(s))}findElements(){const e=document.querySelector(".l-header-menu");if(!e)throw new Error("メニューに必要な要素がありまえん");return{menu:e}}}var Le=i(553),Pe=i(93);class Ae{constructor(e){this.el=this.findElements(e),this.isActive=!1,this.total=this.el.images.length,this.index=0,this.timer=null}show(){this.isActive||(this.isActive=!0,this.next(),this.timer=window.setInterval((()=>{this.next()}),3200))}hide(){this.isActive&&(this.isActive=!1,null!==this.timer&&(window.clearInterval(this.timer),this.timer=null))}next(){const e=this.index===this.total-1?0:this.index+1;this.el.images[this.index].classList.remove(s),this.el.images[e].classList.add(s),this.index=e}findElements(e){const t=Array.from(e.querySelectorAll(".c-card-bg-image"));if(!t.length)throw new Error("カードの要素が見つかりません");return{container:e,images:t}}}class ke{constructor(e){this.el=this.findElements(e),this.isActive=!1}show(){this.isActive||(this.isActive=!0,Le.p8.to(this.el.poster,{opacity:0,duration:.5,ease:"none"}),this.el.video.play())}hide(){return e=this,t=void 0,s=function*(){this.isActive&&(this.isActive=!1,yield Le.p8.to(this.el.poster,{opacity:1,duration:.4,ease:"none"}).then(),this.el.video.pause())},new((i=void 0)||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}));var e,t,i,s}findElements(e){const t=e.querySelector(".c-card-bg-poster"),i=e.querySelector(".c-card-bg-video");if(!t||!i)throw new Error("カードの要素が見つかりません");return{container:e,poster:t,video:i}}}class Me{constructor(){this.events=[]}on(e,t,i,s){e.addEventListener(t,i,s),this.events.push({el:e,type:t,listener:i})}off(e,t,i){const s=i?s=>e===s.el&&t===s.type&&i===s.listener:i=>e===i.el&&t===i.type;this.events.filter((e=>s(e))).forEach((e=>{e.el&&e.el.removeEventListener(e.type,e.listener)})),this.events=this.events.filter((e=>!s(e)))}clear(){this.events.forEach((e=>{e.el&&e.el.removeEventListener(e.type,e.listener)})),this.events=[]}getElements(){return this.events.map((e=>e.el))}}const Ce="can-hover";class Oe{constructor(e,t){this.resize=()=>{const e=this.el.container.getBoundingClientRect();this.width=e.width,this.height=e.height,this.offset.x=e.left,this.offset.y=e.top},this.mouseenter=e=>{this.updateRotation(e),this.gallery&&this.gallery.show()},this.mousemove=e=>{this.updateRotation(e)},this.mouseleave=()=>{this.resetRotation(),this.gallery&&this.gallery.hide()},this.el={container:e,content:e.querySelector(".c-card-content")},this.index=t,this.listener=new Me,this.gallery=null,this.shouldHover=!oe().isMobile,this.canHover=!1,this.width=0,this.height=0,this.offset={x:0,y:0},this.rotation={x:0,y:0},this.createGallery(),this.on(),se().isSmall||this.hide()}destroy(){this.off()}show(){return e=this,t=void 0,s=function*(){this.canHover=!1,this.el.content.classList.remove(Ce);const e=[{x:100,rotationX:-12,rotationY:12,delay:0},{rotationX:-16,delay:.14},{x:-100,rotationX:-12,rotationY:-12,delay:.28}][this.index];Le.p8.set(this.el.content,Object.assign({opacity:0,y:120,scale:.88},e)),yield pe(16),Le.p8.to(this.el.content,{opacity:1,ease:"none",duration:.26,delay:e.delay}),yield Le.p8.to(this.el.content,{x:0,y:0,scale:1,rotationX:0,rotationY:0,rotationZ:0,ease:"power3.out",duration:1.3,delay:e.delay}),this.el.content.classList.add(Ce),yield pe(16),this.canHover=!0},new((i=void 0)||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}));var e,t,i,s}hide(){Le.p8.set(this.el.content,{opacity:0,scale:.9})}createGallery(){if(!this.shouldHover)return;const e=this.el.container,t=e.dataset.cardType;this.gallery="video"===t?new ke(e):new Ae(e)}on(){this.shouldHover&&(this.resize(),this.listener.on(window,d,this.resize),this.listener.on(this.el.container,"mouseenter",this.mouseenter),this.listener.on(this.el.container,"mousemove",this.mousemove),this.listener.on(this.el.container,"mouseleave",this.mouseleave))}off(){this.listener.clear()}updateRotation(e){const t=e.clientX-this.offset.x,i=e.clientY-this.offset.y,s=this.width/2,n=this.height/2,o=Math.min(Math.max((t-s)/s,-1),1),a=Math.min(Math.max((i-n)/n,-1),1);this.rotation={x:ce(10*-a,3),y:ce(10*o,3)},requestAnimationFrame((()=>this.render()))}resetRotation(){this.rotation={x:0,y:0},requestAnimationFrame((()=>this.render()))}render(){this.canHover&&(this.el.content.style.transform=`rotateX(${this.rotation.x}deg) rotateY(${this.rotation.y}deg)`)}}class _e{constructor(e){this.el=this.findElements(e),this.listener=new Me,this.cardItems=[]}create(){this.el.links.forEach(((e,t)=>{this.cardItems.push(new Oe(e,t))}))}destroy(){this.cardItems.forEach((e=>{e.destroy()}))}show(){this.cardItems.forEach((e=>{e.resize(),e.show()}))}hide(){this.cardItems.forEach((e=>{e.hide()}))}findElements(e){const t=Array.from(e.querySelectorAll(".c-card-link")),i=Array.from(e.querySelectorAll(".c-card-content")),s=e.querySelector(".c-card-list");if(!t.length||!i.length||!s)throw new Error("カードの要素が見つかりません");return{container:e,links:t,contents:i,list:s}}}class Ie{constructor(e){this.prev=e=>{e.stopPropagation(),this.scrollTo(-1)},this.next=e=>{e.stopPropagation(),this.scrollTo(1)},this.el=this.findElements(e),this.listener=new Me,this.cardItems=[]}create(){this.el.links.forEach(((e,t)=>{this.cardItems.push(new Oe(e,t))})),this.on()}destroy(){this.cardItems.forEach((e=>{e.destroy()})),this.off()}show(){return e=this,t=void 0,s=function*(){Le.p8.set(this.el.cardContainer,{scrollTo:{x:0}}),this.cardItems.forEach((e=>{e.resize()})),Le.p8.set(this.el.list,{x:"-100%"}),yield pe(16),Le.p8.to(this.el.list,{x:0,ease:"power3.out",duration:1.2})},new((i=void 0)||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}));var e,t,i,s}hide(){Le.p8.set(this.el.list,{x:"-100%"})}on(){oe().isMobile||(this.listener.on(this.el.prev,"click",this.prev),this.listener.on(this.el.next,"click",this.next))}off(){this.listener.clear()}scrollTo(e){const t=this.el.cardContainer.scrollLeft+e*(this.el.items.length?this.el.items[0].clientWidth:0);Le.p8.to(this.el.cardContainer,{scrollTo:{x:t},duration:.8,ease:"power3.out"})}findElements(e){const t=e.querySelector(".c-card-container"),i=e.querySelector(".c-card-list"),s=e.querySelector(".c-card-nav-prev"),n=e.querySelector(".c-card-nav-next"),o=Array.from(e.querySelectorAll(".c-card-item")),a=Array.from(e.querySelectorAll(".c-card-link")),r=Array.from(e.querySelectorAll(".c-card-content"));if(!(t&&i&&s&&n&&o.length&&a.length&&r.length))throw new Error("カードの要素が見つかりません");return{container:e,list:i,prev:s,next:n,cardContainer:t,items:o,links:a,contents:r}}}function ze(e){return se().isSmall?new Ie(e):new _e(e)}function Te(){return"true"===document.body.dataset.menuTransition}var qe=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};class Re{constructor(){this.open=()=>qe(this,void 0,void 0,(function*(){this.isOpen||(this.isOpen=!0,this.isTransitioning=!1,this.el.headerMenu.classList.remove("is-transitioning"),this.card.hide(),(0,Pe.dR)([this.el.headerContainer,this.el.cardContainer]),this.el.headerContainer.style.display="block",yield pe(16),Le.p8.to(this.el.headerContent,{opacity:1,duration:.48,ease:"none"}).then(),yield pe(250),this.el.headerMenu.style.setProperty("--menu-delay","1130ms"),yield pe(16),this.el.headerMenu.classList.add(s),yield pe(1130),this.card.show())})),this.close=()=>qe(this,void 0,void 0,(function*(){if(!this.isOpen)return;this.isOpen=!1,(0,Pe.Un)([this.el.headerContainer,this.el.cardContainer]),yield pe(16),this.el.headerMenu.classList.remove(s);const e=se().isSmall&&this.isTransitioning?.5:.32;this.el.headerMenu.style.setProperty("--menu-delay",`${e}s`),yield Le.p8.to(this.el.headerContent,{opacity:0,duration:e,ease:"none"}).then()})),this.el=this.findElements(),this.card=ze(this.el.header),this.isOpen=!1,this.isTransitioning=!1}init(){this.card.create(),this.on()}on(){this.el.headerContainer.addEventListener("click",(()=>{window.dispatchEvent(new CustomEvent(f))})),this.el.headerLinks.forEach((e=>{e.addEventListener("click",(t=>{e.href===window.location.href?(t.preventDefault(),t.stopPropagation(),window.dispatchEvent(new CustomEvent(f))):(this.isTransitioning=!0,document.body.dataset.menuTransition="true")}))}))}hide(){this.isOpen||(this.el.headerContainer.style.display="none")}updateActive(){this.el.headerNavLinks.forEach((e=>{e.href===window.location.href?e.classList.contains(s)||e.classList.add(s):e.classList.contains(s)&&e.classList.remove(s)}))}findElements(){const e=document.querySelector(".l-header"),t=document.querySelector(".l-header-container"),i=document.querySelector(".l-header-content"),s=document.querySelector(".l-header .c-menu"),n=Array.from(document.querySelectorAll(".l-header-container a")),o=Array.from(document.querySelectorAll(".l-header-container .c-nav-link")),a=document.querySelector(".l-header .c-card-container");if(!(e&&t&&i&&s&&n.length&&o.length&&a))throw new Error("メニューに必要な要素がありまえん");return{header:e,headerContainer:t,headerContent:i,headerMenu:s,headerLinks:n,headerNavLinks:o,cardContainer:a}}}class De{constructor(){this.isActive=!1,this.burger=new Ee,this.nav=new Re,this.init(),this.on()}init(){this.burger.init(),this.nav.init()}on(){window.addEventListener(v,(()=>{this.isActive?(window.dispatchEvent(new CustomEvent(f)),this.close()):(window.dispatchEvent(new CustomEvent(g)),this.open())})),window.addEventListener(f,(()=>{this.close()}))}enter(){this.burger.enter()}leave(){this.burger.leave()}open(){this.isActive||(this.isActive=!0,this.burger.open(),this.nav.open())}close(){return e=this,t=void 0,s=function*(){this.isActive&&(this.isActive=!1,this.burger.close(),yield this.nav.close(),this.isActive||this.nav.hide())},new((i=void 0)||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}));var e,t,i,s}updateActive(){this.nav.updateActive()}}let Ye=null;function je(){return Ye||(Ye=new De),Ye}var Fe=i(212);class $e{constructor(){const e=se();this.instance=new Fe.iKG(-e.canvas.width/2,+e.canvas.width/2,+e.canvas.height/2,-e.canvas.height/2,1,40),this.instance.position.z=20}update(){}resize(e,t){this.instance&&(this.instance.left=-e/2,this.instance.right=+e/2,this.instance.top=+t/2,this.instance.bottom=-t/2,this.instance.updateProjectionMatrix())}}const He=1.2;class Be{constructor(e){this.view=se(),this.clock=new Fe.SUY,this.material=new Fe.xeV({map:e,transparent:!0}),this.sprite=new Fe.jyi(this.material),this.speed=new Fe.FM8,this.baseOpacity=0,this.opacity=0,this.duration=0,this.isActive=!1,this.reset()}update(){let e=1;const t=this.clock.getDelta(),i=this.clock.elapsedTime;i<=He?e=de(i/He,0,1):i>=this.duration-He&&(e=de((this.duration-i)/He,0,1)),this.sprite.position.x+=this.speed.x*e*t,this.sprite.position.y+=this.speed.y*e*t,i>this.duration&&(this.speed.x=-this.speed.x,this.speed.y=-this.speed.y,this.clock.start())}reset(){const e=this.view.canvas.width,t=this.view.canvas.height,i=e/2*(1-Math.pow(Math.random(),3))*he(),s=t/2*(1-Math.pow(Math.random(),3))*he();this.speed=new Fe.FM8(le(-15,15),le(-15,15)),this.opacity=le(.7,1),this.duration=le(6.4,12.4),this.material.opacity=this.baseOpacity*this.opacity,this.sprite.position.set(i,s,0),this.sprite.scale.set(1,1,1)}fadeIn(){this.isActive=!0,Le.p8.to(this,{baseOpacity:1,duration:.5,ease:"none",onUpdate:()=>{this.material.opacity=this.baseOpacity*this.opacity}})}fadeOut(e=.5){Le.p8.to(this,{baseOpacity:0,duration:e,ease:"none",onUpdate:()=>{this.material.opacity=this.baseOpacity*this.opacity},onComplete:()=>{this.isActive=!1}})}}var Ge=i(338),Ve=i(47);const Ne={};function Xe(e){return new Promise((t=>{Ne[e]?t(Ne[e]):(new Fe.dpR).load(e,(i=>{Ne[e]=i,t(i)}))}))}class We{constructor(){this.particles=[],this.instance=new Fe.ZAu,this.isInitialized=!1,this.baseOpacity=0,this.isActive=!1}init(){return e=this,t=void 0,s=function*(){if(this.isInitialized)return!0;const e=yield Xe(`${ee}/particle.png`);for(let t=0;t<200;t++){const t=new Be(e);this.instance.add(t.sprite),this.particles.push(t)}this.instance.position.z=5,this.isInitialized=!0},new((i=void 0)||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}));var e,t,i,s}update(){this.isInitialized&&this.particles.forEach((e=>{e.update()}))}activate(){this.isActive=!0}deactivate(){this.isActive=!1}scroll(e){if(!this.isActive)return;const t=200*e/600;this.particles.forEach(((e,i)=>{i>t?e.isActive||e.fadeIn():e.isActive&&e.fadeOut()}))}fadeIn(){this.isActive&&this.particles.forEach((e=>{e.fadeIn()}))}fadeOut(e=.5){this.isActive&&this.particles.forEach((t=>{t.fadeOut(e)}))}}class Ue{constructor(){this.instance=new Fe.xsS}add(e){this.instance.add(e)}remove(e){this.instance.remove(e)}clear(){this.instance.children.forEach((e=>{this.instance.remove(e)}))}}class Ze{constructor(){this.stage=new Ue,this.camera=new $e,this.particle=oe().isMobile?null:new We}init(){this.particle&&(this.particle.init(),this.particle.instance&&this.stage.add(this.particle.instance))}update(){this.particle&&this.particle.update()}resize(e,t){this.camera.resize(e,t)}scroll(e){this.particle&&this.particle.scroll(e)}}const Ke=e=>Fe.M8C.degToRad(e),Je=e=>new Fe.Pa4(e.r*Math.cos(Ke(e.angle)),e.y,e.r*Math.sin(Ke(e.angle))),Qe="polar",et="position";class tt{constructor(){const e=se();this.visitor=oe(),this.coordinateSystem=Qe,this.position=new Fe.Pa4,this.polar={y:0,r:0,angle:0},this.mouseCoord=new Fe.FM8,this.distance={hold:0,mobile:2},this.lookAt=new Fe.Pa4,this.settings={fov:{deg:60,rad:Math.PI/180*30}},this.instance=new Fe.cPb(this.settings.fov.deg,e.canvas.width/e.canvas.height,.01,200),this.resize(e.canvas.width,e.canvas.height)}getCoordinate(){return this.coordinateSystem}changeCoordinate(e){this.coordinateSystem=e}setDistanceOnHold(){Le.p8.to(this.distance,{hold:1,duration:3,ease:"sine.inOut"}).then()}clearDistanceOnHold(){Le.p8.to(this.distance,{hold:0,duration:10,ease:"power3.out"}).then()}getNegativeLookAt(e,t){return t.clone().sub(e).negate().add(e).normalize()}getCameraOffsetDistance(){let e=0;return this.visitor.isMobile&&(e+=2),0!==this.distance.hold&&(e+=this.distance.hold),e}update(){switch(this.coordinateSystem){case et:this.polar=(e=>{return{r:Math.sqrt(Math.pow(e.x,2)+Math.pow(e.z,2)),y:e.y,angle:(t=Math.atan2(e.z,e.x),Fe.M8C.radToDeg(t))};var t})(this.position);break;case Qe:this.position=Je(this.polar)}const e=this.getCameraOffsetDistance(),t=this.position.clone();if(0!==e){const i=this.getNegativeLookAt(t,this.lookAt);i.multiplyScalar(e),t.add(i)}const i=new Fe.FM8(t.x,t.z),s=new Fe.FM8(this.lookAt.x,this.lookAt.z),n=s.clone().sub(i).rotateAround(s,Ke(90)).normalize();t.x=t.x+this.mouseCoord.x*n.x*.4*-1,t.y=t.y+.4*this.mouseCoord.y*-1,t.z=t.z+this.mouseCoord.x*n.y*.4*-1,this.instance.position.x=t.x,this.instance.position.y=t.y,this.instance.position.z=t.z,this.instance.lookAt(this.lookAt.x,this.lookAt.y,this.lookAt.z)}resize(e,t){this.instance.aspect=e/t,this.instance.updateProjectionMatrix()}pointerChange(e,t){const i=se(),s=2*(e/i.canvas.width-.5),n=2*((i.canvas.height-t)/i.canvas.height-.5);Le.p8.to(this.mouseCoord,{x:s,y:n,duration:3,ease:"power3.out"})}}class it{constructor(){this.state={color:16777215,intensity:0},this.instance=new Fe.Mig(this.state.color,this.state.intensity)}update(){this.instance.intensity=this.state.intensity}}class st{constructor(){this.state={color:8092581,intensity:0,position:new Fe.Pa4},this.instance=new Fe.Ox3(this.state.color,this.state.intensity),this.instance.position.set(this.state.position.x,this.state.position.y,this.state.position.z)}update(){this.instance.intensity=this.state.intensity,this.instance.position.set(this.state.position.x,this.state.position.y,this.state.position.z)}}const nt=.5;class ot{constructor(e){this.view=se(),this.clock=new Fe.SUY,this.material=new Fe.xeV({map:e,transparent:!0}),this.sprite=new Fe.jyi(this.material),this.speed=new Fe.Pa4,this.baseOpacity=1,this.opacity=0,this.duration=0,this.reset()}update(){let e=1;const t=this.clock.getDelta(),i=this.clock.elapsedTime;i<=nt?e=de(i/nt,0,1):i>=this.duration-nt&&(e=de((this.duration-i)/nt,0,1)),this.sprite.position.x+=this.speed.x*e*t,this.sprite.position.y+=this.speed.y*e*t,i>this.duration&&(this.speed.x=-this.speed.x,this.speed.y=-this.speed.y,this.speed.z=-this.speed.z,this.clock.start())}reset(){const e=le(-10,40),t=le(25,50),i=2*Math.random()*Math.PI,s=t*Math.cos(i),n=t*Math.sin(i);this.speed=new Fe.Pa4(le(-.4,.4),le(-.4,.4),le(-.4,.4)),this.opacity=le(.2,.4),this.duration=le(9,17),this.material.opacity=this.opacity,this.sprite.position.set(s,e,n),this.sprite.scale.set(.1,.1,1),this.clock.start()}fade(e){this.baseOpacity=e,this.material.opacity=this.baseOpacity*this.opacity}}class at{constructor(){this.particles=[],this.instance=new Fe.ZAu,this.baseOpacity=0,this.isInitialized=!1}init(){return e=this,t=void 0,s=function*(){const e=yield Xe(`${ee}/particle.png`);for(let t=0;t<400;t++){const t=new ot(e);t.fade(this.baseOpacity),this.instance.add(t.sprite),this.particles.push(t)}this.instance.position.z=5,this.isInitialized=!0},new((i=void 0)||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}));var e,t,i,s}update(){this.isInitialized&&this.particles.forEach((e=>{e.update()}))}fadeIn(){Le.p8.to(this,{baseOpacity:1,duration:1,ease:"none",onUpdate:()=>{this.particles.forEach((e=>{e.fade(this.baseOpacity)}))}})}fadeOut(e=1){Le.p8.to(this,{baseOpacity:0,duration:e,ease:"none",onUpdate:()=>{this.particles.forEach((e=>{e.fade(this.baseOpacity)}))}})}}var rt=i(174);const lt=`${Q}/common/environments/venice_sunset_1k.hdr`;class ht{constructor(){this.instance=new Fe.xsS}loadEnvironment(){return e=this,t=void 0,s=function*(){return new Promise((e=>{(new rt.x).setDataType(Fe.ywz).load(lt,(t=>{e(t)}))}))},new((i=void 0)||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}));var e,t,i,s}add(e){this.instance.add(e)}remove(e){this.instance.remove(e)}clear(){this.instance.children.forEach((e=>{this.instance.remove(e)}))}}class ct{constructor(){this.stage=new ht,this.camera=new tt,this.ambientLight=new it,this.directionalLight=new st,this.particle=new at}init(){this.stage.add(this.ambientLight.instance),this.stage.add(this.directionalLight.instance),this.particle.init(),this.particle.instance&&this.stage.add(this.particle.instance)}update(){this.camera.update(),this.ambientLight.update(),this.directionalLight.update(),this.particle.update()}resize(e,t){this.camera.resize(e,t)}pointerChange(e,t){this.camera.pointerChange(e,t)}}class dt{constructor(){const e=oe(),t=se(),i=e.isMobile?Math.min(window.devicePixelRatio,2):1;this.el={container:document.querySelector(".l-stage")},this.hasGradient=!1,this.instance=new Fe.CP7({alpha:!0,antialias:!0}),this.instance.setSize(t.canvas.width,t.canvas.height),this.instance.setPixelRatio(i),this.instance.autoClear=!0,this.instance.outputEncoding=Fe.knz,this.el.container.appendChild(this.instance.domElement)}render(e,t){this.instance.render(e,t)}resize(e,t){this.instance.setSize(e,t)}getSize(){return{width:this.el.container.clientWidth,height:this.el.container.clientHeight}}addGradient(){this.hasGradient||(this.hasGradient=!0,this.el.container.classList.add("has-gradient"))}removeGradient(){this.hasGradient&&(this.hasGradient=!1,this.el.container.classList.remove("has-gradient"))}}class ut{constructor(){this.handleResize=e=>{const{width:t,height:i}=e.detail;this.resize(t,i)},this.resize=(e,t)=>{this.two.resize(e,t),this.renderer.resize(e,t),this.shouldRender3d&&this.three.resize(e,t)},this.handlePointerChange=e=>{const{x:t,y:i}=e.detail;this.pointerChange(t,i)},this.pointerChange=(e,t)=>{this.shouldRender3d&&this.three.pointerChange(e,t)},this.handleScroll=e=>{this.two.scroll(e.detail.scroll.y)},this.shouldRender3d=!1,this.renderer=new dt,this.two=new Ze,this.three=new ct}init(){this.two.init(),this.three.init(),this.render(),this.on()}enable3d(){const e=se();this.shouldRender3d=!0,this.renderer.instance.autoClear=!1,this.three.resize(e.canvas.width,e.canvas.height)}disable3d(){this.shouldRender3d=!1,this.renderer.instance.autoClear=!0}render(){requestAnimationFrame((()=>this.render())),this.shouldRender3d?(this.two.update(),this.three.update(),this.renderer.instance.clear(),this.renderer.render(this.three.stage.instance,this.three.camera.instance),this.renderer.instance.clearDepth(),this.renderer.render(this.two.stage.instance,this.two.camera.instance)):(this.two.update(),this.renderer.render(this.two.stage.instance,this.two.camera.instance))}on(){window.addEventListener(m,this.handleScroll),window.addEventListener(u,this.handleResize),window.addEventListener(E,this.handlePointerChange)}}let pt=null;function mt(){return pt||(pt=new ut,pt)}var vt=i(376),gt=new class{constructor(){this.isDisabled=!0,this.gui=null}add(e){this.isDisabled||(null===this.gui&&(this.gui=new vt.XS,this.gui.close()),e(this.gui))}},ft=new class{constructor(){this.isDisabled=!0}addControl(e){if(this.isDisabled)return;const{camera:t,ambientLight:i,directionalLight:s}=e.three;gt.add((e=>{const t=e.addFolder("AmbientLight"),s={visible:!0,intensity:1,color:"#ffffff",update:()=>{s.visible=i.instance.visible,s.intensity=i.state.intensity,s.color=`#${i.instance.color.getHexString()}`,t.updateDisplay()}};s.update(),t.add(s,"update"),t.add(s,"visible").onChange((()=>{i.instance.visible=s.visible})),t.add(s,"intensity",0,10,.01).onChange((()=>{i.state.intensity=s.intensity})),t.addColor(s,"color").onChange((()=>{i.instance.color=new Fe.Ilk(s.color)}))})),gt.add((e=>{const t=e.addFolder("DirectionalLight"),i={visible:!0,intensity:1,color:"#7b7ba5",x:0,y:0,z:0,update:()=>{i.visible=s.instance.visible,i.intensity=s.instance.intensity,i.color=`#${s.instance.color.getHexString()}`,i.x=s.instance.position.x,i.y=s.instance.position.y,i.z=s.instance.position.z,t.updateDisplay()}},n=()=>{fe.p8.set(s.state.position,{x:i.x,y:i.y,z:i.z})};i.update(),t.add(i,"update"),t.add(i,"visible").onChange((()=>{s.instance.visible=i.visible})),t.addColor(i,"color").onChange((()=>{s.instance.color=new Fe.Ilk(i.color)})),t.add(i,"intensity",0,10,.01).onChange((()=>{fe.p8.set(s.state,{intensity:i.intensity})})),t.add(i,"x",-100,100).onChange((()=>n())),t.add(i,"y",-100,100).onChange((()=>n())),t.add(i,"z",-100,100).onChange((()=>n()))})),gt.add((e=>{const i=e.addFolder("Camera"),s={lookAtX:0,lookAtY:0,lookAtZ:0,polar:{y:0,r:0,angle:0},position:{x:0,y:0,z:0},usePolar:!0,update:()=>{s.polar.y=t.polar.y,s.polar.r=t.polar.r,s.polar.angle=t.polar.angle,s.position.x=t.position.x,s.position.y=t.position.y,s.position.z=t.position.z,s.lookAtX=t.lookAt.x,s.lookAtY=t.lookAt.y,s.lookAtZ=t.lookAt.z,i.updateDisplay()}},n=()=>{t.polar.y=s.polar.y,t.polar.r=s.polar.r,t.polar.angle=s.polar.angle},o=()=>{t.position.x=s.position.x,t.position.y=s.position.y,t.position.z=s.position.z},a=()=>{t.lookAt.set(s.lookAtX,s.lookAtY,s.lookAtZ)};i.add(s,"update"),i.add(s,"usePolar",!0).onChange((()=>{const e=s.usePolar?Qe:et;t.changeCoordinate(e)})),i.add(s,"lookAtX",-40,40,.001).onChange((()=>a())),i.add(s,"lookAtY",-40,40,.001).onChange((()=>a())),i.add(s,"lookAtZ",-40,40,.001).onChange((()=>a()));const r=i.addFolder("Polar");r.add(s.polar,"y",-40,40,.001).onChange((()=>n())),r.add(s.polar,"r",0,40,.001).onChange((()=>n())),r.add(s.polar,"angle",-360,360,.001).onChange((()=>n()));const l=i.addFolder("Position");l.add(s.position,"x",-100,100,.001).onChange((()=>o())),l.add(s.position,"y",-100,100,.001).onChange((()=>o())),l.add(s.position,"z",-100,100,.001).onChange((()=>o())),s.update()}))}},yt=i(258);class wt{constructor(){this.settings={key:{visited:"takamatsu_visited"},expires:365}}isVisited(){return this.has(this.settings.key.visited)}setVisited(){this.set(this.settings.key.visited,"1")}set(e,t){yt.Z.set(e,t,{expires:this.settings.expires})}get(e){return yt.Z.get(e)}has(e){return void 0!==yt.Z.get(e)}remove(e){yt.Z.remove(e)}}let xt=null;class bt{isSameLang(){return this.html()===this.browser()}html(){return"ja"===document.documentElement.getAttribute("lang")?"ja":"en"}browser(){return"ja"===window.navigator.language.toLowerCase().substr(0,2)?"ja":"en"}getHrefLang(e){switch(e){case"ja":return"ja";case"en":return"en-US"}return""}redirect(e){const t=this.getHrefLang(e),i=document.querySelector(`link[rel="alternate"][hreflang="${t}"]`);if(i){const e=i.getAttribute("href");if(e)return void(location.href=e)}console.error('リダイレクト先の <link rel="alternate"> が見つかりませんでした')}redirectToBrowserLang(){this.html()!==this.browser()&&this.redirect(this.browser())}}let St=null;var Et=i(267);class Lt{constructor(){this.scroll=null,this.y=0,this.prevY=0,this.isLocking=!1,this.isSmooth=!0,this.isForward=!0,this.watch()}create(e){this.scroll&&this.destroy(),this.scroll=new Et.ZP({el:e,smooth:!0,lerp:.08,smartphone:{smooth:!0},tablet:{smooth:!0}}),this.scroll.on("scroll",(e=>{if(this.y=e.scroll.y,this.isLocking)return;const t=this.y>=this.prevY;this.prevY=this.y,this.isForward=t,window.dispatchEvent(new CustomEvent(m,{detail:{isSmooth:this.isSmooth,scroll:e.scroll}}))}))}destroy(){this.scroll&&(this.scroll.destroy(),this.scroll=null)}watch(){window.addEventListener(p,(()=>{this.scroll&&this.scroll.update()}))}lock(){this.isLocking||(this.isLocking=!0,this.scroll&&this.scroll.stop())}unlock(){this.isLocking&&(this.isLocking=!1,this.scroll&&(this.scroll.start(),this.scroll.update()))}scrollTo(e,t={}){this.scroll&&this.scroll.scrollTo(e,t)}smoothScroll(e){Array.from(e.querySelectorAll('a[href^="#"]')).forEach((e=>{e.addEventListener("click",(t=>{const i=document.querySelector(e.getAttribute("href")||"");i&&(t.preventDefault(),this.scrollTo(i))}))}))}getScrollY(){return this.y}}class Pt{constructor(){this.y=0,this.prevY=0,this.isSmooth=!1,this.isForward=!0,this.watch()}create(e){}destroy(){}watch(){window.addEventListener("scroll",(()=>{this.y=window.pageYOffset||document.documentElement.scrollTop;const e=this.y>=this.prevY;this.prevY=this.y,this.isForward=e,window.dispatchEvent(new CustomEvent(m,{detail:{isSmooth:this.isSmooth,scroll:{x:0,y:this.y}}}))}))}lock(){}unlock(){}scrollTo(e,t={}){fe.p8.to(window,Object.assign({duration:1,easing:"expo.out",scrollTo:(()=>{if("top"===e)return 0;if(e instanceof HTMLElement){const t=e.getBoundingClientRect(),i=this.getScrollY();return t.top+i}return e})()},(t.disableLerp&&(t.duration=0),t)))}smoothScroll(e){Array.from(e.querySelectorAll('a[href^="#"]')).forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),fe.p8.to(window,{duration:1,easing:"expo.out",scrollTo:e.getAttribute("href")||""})}))}))}getScrollY(){return this.y}}let At=null;function kt(){return At||(At=oe().isMobile?new Pt:new Lt,At)}const Mt=(e,{x:t,y:i})=>{window.dispatchEvent(new CustomEvent(e,{detail:{x:t,y:i}}))},Ct=(e,t)=>{const i=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY;Mt(t,{x:i,y:s}),Mt(E,{x:i,y:s})},Ot=(e,t)=>{const i=e.clientX,s=e.clientY;Mt(t,{x:i,y:s}),Mt(E,{x:i,y:s})};class _t{constructor(){this.state={name:"",path:"",scope:"",isPhilosophy:!1,preview:{isPreview:!1,postType:""}};const e=new URL(location.href),t=e.searchParams.get("p"),i=e.searchParams.get("preview");null!==t&&"true"===i&&(this.state.preview.isPreview=!0,this.state.preview.postType=e.searchParams.get("post_type")||"")}change(e,t,i){this.state={name:e,path:t,scope:i,isPhilosophy:e===P,preview:this.state.preview},window.dispatchEvent(new CustomEvent("customRouteChange",{detail:{name:e,path:t,scope:i,isPhilosophy:this.state.isPhilosophy}}))}}let It=null;function zt(){return It||(It=new _t),{route:()=>It?It.state:{name:"",path:"",scope:"",isPhilosophy:!1,preview:{isPreview:!1,postType:""}},changeRoute:(e,t,i)=>null==It?void 0:It.change(e,t,i)}}var Tt=i(975),qt=i(127),Rt=i(69),Dt=i.n(Rt),Yt=i(888),jt=i.n(Yt);const Ft=()=>kt().getScrollY(),$t=e=>{const t=e.getBoundingClientRect();return{x:t.left,y:t.top+Ft()}},Ht=e=>{const t=se(),i=e.clientWidth,s=e.clientHeight,n=$t(e);return{width:i,height:s,meshX:-.5*t.canvas.width+.5*i+n.x,meshY:.5*t.canvas.height-.5*s-n.y,startY:n.y,endY:n.y+s}};class Bt{constructor(e,t){this.resize=()=>{const e=Ht(this.el.container),t=window.getComputedStyle(this.el.container),i=t.paddingTop.match(/^\d/)?parseFloat(t.paddingTop):0,s=t.paddingBottom.match(/^\d/)?parseFloat(t.paddingBottom):0,n=this.el.child.clientHeight,o=window.getComputedStyle(this.el.child),a=o.top.match(/^\d/)?parseFloat(o.top):0;this.startY=e.startY+i-a,this.endY=e.endY-s-n-a},this.scroll=e=>{const t=e.detail.scroll.y;if(!(t>=this.startY&&t<=this.endY))return;const i=t-this.startY;this.el.child.style.transform=`translateY(${i}px)`},this.el={container:e,child:t},this.startY=0,this.endY=0,this.listener=new Me,this.init(),this.on()}init(){this.resize()}on(){this.listener.on(window,m,this.scroll),this.listener.on(window,p,this.resize)}off(){this.listener.clear()}}class Gt{constructor(e){this.resize=()=>{const e=[];this.el.targets.forEach((t=>{const i=$t(t);e.push(i.y)})),this.points=e},this.scroll=e=>{const t=e.detail.scroll.y;let i=0;this.points.forEach(((e,s)=>{t+.5*this.view.height>=e&&(i=s)})),i!==this.index&&(this.index=i,this.update())},this.el=this.findElements(e),this.listener=new Me,this.view=se(),this.index=0,this.points=[],this.init(),this.on()}findElements(e){const t=Array.from(e.querySelectorAll(".c-toc-link")),i=t.map((e=>{const t=e.getAttribute("href")||"";return t&&"#"!==t?document.querySelector(t):null})).filter((e=>null!==e));return{links:t,targets:i}}init(){this.resize(),this.update()}on(){this.listener.on(window,m,this.scroll),this.listener.on(window,p,this.resize)}off(){this.listener.clear()}update(){this.el.links.forEach((e=>{e.classList.contains(s)&&e.classList.remove(s)})),this.el.links[this.index].classList.add(s)}}var Vt=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};class Nt{constructor(){this.isLoading=!1,this.isLoaded=!1,this.isCreating=!1,this.isCreated=!1,this.isEntered=!1,this.isLeaving=!1,this.isWatching=!1,this.instance=null}preload(){return Vt(this,void 0,void 0,(function*(){if(this.isLoaded)return Promise.resolve();this.isLoading?yield me((()=>this.isLoaded)):(this.isLoading=!0,this.onPreload&&(yield this.onPreload()),this.isLoading=!1,this.isLoaded=!0)}))}create(){return Vt(this,void 0,void 0,(function*(){this.isCreating||this.isCreated||(this.isCreating=!0,yield this.preload(),this.onCreate&&this.onCreate(),this.resize(),this.isCreating=!1,this.isCreated=!0)}))}enter(e){return Vt(this,void 0,void 0,(function*(){this.isEntered=!0,this.isLeaving=!1,this.resize(),this.onEnter&&(yield this.onEnter(e))}))}leave(e){return Vt(this,void 0,void 0,(function*(){this.isLeaving||(this.isEntered=!1,this.isLeaving=!0,this.onLeave&&(yield this.onLeave(e)),this.isLeaving=!1)}))}destroy(){this.onDestroy&&this.onDestroy()}resize(){this.onResize&&this.onResize()}scroll(e){this.isCreated&&this.onScroll&&this.onScroll(e)}watch(){this.isWatching=!0,this.onWatch&&this.onWatch()}unwatch(){this.isWatching=!1,this.onUnwatch&&this.onUnwatch()}}class Xt extends Nt{constructor(e){super(),this.el=e,this.forceFixed=!1,this.parallaxY=0,this.coordinate={width:0,height:0,meshX:0,meshY:0,startY:0,endY:0}}resize(){this.instance&&(this.coordinate=Ht(this.el),this.instance.scale.x=this.coordinate.width,this.instance.scale.y=this.coordinate.height,this.updatePosition()),this.onResize&&this.onResize()}updatePosition(){this.instance&&!this.forceFixed&&(this.instance.position.x=this.coordinate.meshX,this.instance.position.y=this.coordinate.meshY+this.parallaxY)}}var Wt="#define GLSLIFY 1\nvarying vec2 v_uv;\nuniform sampler2D uTexture;\nuniform sampler2D uDisplacement;\nuniform float uBaseOpacity;\nuniform float uProgress;\nuniform bool uEnter;\n\nconst float PI = 3.1415;\n\nmat2 getRotM(float angle) {\n  float s = sin(angle);\n  float c = cos(angle);\n\n  return mat2(c, -s, s, c);\n}\n\nvec4 createNoiseImage(sampler2D tex, sampler2D displaceTex, vec2 uv, bool isEnter, float progress) {\n  float intensity = 0.14;\n  float a = isEnter == true ? PI * 1.75 : PI * 0.75;\n\n  vec4 t1 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 disp = texture2D(displaceTex, uv);\n  vec2 dispVec = vec2(disp.r, disp.g);\n  vec2 distortedPosition2 = uv + getRotM(a) * dispVec * intensity * (1.0 - progress);\n  vec4 t2 = texture2D(tex, distortedPosition2);\n\n  return mix(t1, t2, progress);\n}\n\nvoid main() {\n  vec4 noiseImage = createNoiseImage(uTexture, uDisplacement, v_uv, uEnter, uProgress);\n\n  gl_FragColor = vec4(noiseImage.r, noiseImage.g, noiseImage.b, noiseImage.a * uBaseOpacity);\n}\n",Ut="#define GLSLIFY 1\nvarying vec2 v_uv;\nvarying vec2 v_original_uv;\nuniform vec2 uResolution;\nuniform vec2 uTextureResolution;\n\nvoid main() {\n  v_original_uv = uv;\n  v_uv = uv - .5;\n  v_uv.x *= min((uResolution.x / uResolution.y) / (uTextureResolution.x / uTextureResolution.y), 1.0);\n  v_uv.y *= min((uResolution.y / uResolution.x) / (uTextureResolution.y / uTextureResolution.x), 1.0);\n  v_uv += .5;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",Zt=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};class Kt extends Xt{constructor(e){super(e);const t=oe();this.isMobile=t.isMobile,this.geometry=null,this.material=null,this.baseOpacity=1,this.uniforms={uProgress:{value:0},uBaseOpacity:{value:this.baseOpacity},uBaseGradient:{value:1},uEnter:{value:!0},uTexture:{value:null},uDisplacement:{value:null},uResolution:{value:new Fe.FM8},uTextureResolution:{value:new Fe.FM8},uRadius:{value:0},uAspectRatio:{value:1},uMouse:{value:new Fe.FM8(.5,.5)}},this.scale={enter:1.4,leave:1}}onPreload(){return Zt(this,void 0,void 0,(function*(){const e=ue(this.el),[t,i]=yield Promise.all([Xe(e),Xe(`${ee}/noise01.jpg`)]),s=t.image;this.uniforms.uTexture.value=t,this.uniforms.uDisplacement.value=i,this.uniforms.uTextureResolution.value.set(s.width,s.height)}))}onCreate(){return this.geometry=new Fe._12(1,1),this.material=new Fe.jyz({uniforms:this.uniforms,vertexShader:this.getVertexShader?this.getVertexShader():Ut,fragmentShader:this.getFragmentShader?this.getFragmentShader():Wt,transparent:!0}),this.instance=new Fe.Kj0(this.geometry,this.material),Promise.resolve()}onEnter(){return Zt(this,void 0,void 0,(function*(){this.instance&&(this.uniforms.uEnter.value=!0,fe.p8.set(this.uniforms.uBaseOpacity,{value:this.baseOpacity}),fe.p8.set(this.uniforms.uBaseGradient,{value:1}),fe.p8.set(this.uniforms.uProgress,{value:0}),yield Promise.all([fe.p8.to(this.uniforms.uProgress,{value:1,ease:"power3.out",duration:1.6}).then(),fe.p8.to(this.uniforms.uBaseGradient,{value:0,ease:"power3.out",duration:12,delay:1.6}).then(),fe.p8.fromTo(this.instance.scale,{x:this.coordinate.width*this.scale.enter,y:this.coordinate.height*this.scale.enter},{x:this.coordinate.width,y:this.coordinate.height,ease:"power3.out",duration:1.6}).then()]))}))}onLeave(){return Zt(this,void 0,void 0,(function*(){if(!this.instance)return;this.uniforms.uEnter.value=!1;const e=[];e.push(fe.p8.to(this.uniforms.uProgress,{value:0,ease:"power3.in",duration:1.1}).then()),1!==this.scale.enter&&e.push(fe.p8.to(this.instance.scale,{x:this.coordinate.width*this.scale.leave,y:this.coordinate.height*this.scale.leave,ease:"power3.in",duration:1.1}).then()),yield Promise.all(e)}))}fadeOut(e=1){return Zt(this,void 0,void 0,(function*(){this.isLeaving||(this.isEntered=!1,this.isLeaving=!0,yield fe.p8.to(this.uniforms.uBaseOpacity,{value:0,duration:e,ease:"none"}).then(),this.isLeaving=!1)}))}onResize(){this.uniforms.uResolution.value.set(this.coordinate.width,this.coordinate.height),this.uniforms.uAspectRatio.value=this.coordinate.width/this.coordinate.height}updateElement(e){this.el=e}}class Jt extends Kt{constructor(e){super(e),this.scrollY=0,this.mouse=new Fe.FM8,this.isOver=!1,this.uniforms.uBaseOpacity.value=0,this.forceFixed=!!oe().isMobile}onScroll(e){this.scrollY=e;const t=se(),i=this.isMobile?.2:.8;e>this.coordinate.startY-t.height*i?this.isEntered||this.enter():this.isEntered&&this.leave(),this.moveMask()}onPointerChange(e,t){this.mouse.x=e,this.mouse.y=t,this.moveMask()}moveMask(){const e=this.scrollY+this.mouse.y-this.coordinate.startY,t=e>=0&&e<=this.coordinate.height,i=this.mouse.x/this.coordinate.width,s=(this.coordinate.height-e)/this.coordinate.height;this.isOver&&!t?this.hideMask():!this.isOver&&t&&(Le.p8.set(this.uniforms.uMouse.value,{x:i,y:s}),this.showMask()),this.isOver=t,t&&Le.p8.to(this.uniforms.uMouse.value,{x:i,y:s,duration:1,ease:"power3.out"})}showMask(){Le.p8.to(this.uniforms.uBaseOpacity,{value:1,duration:.6,ease:"none"}),Le.p8.fromTo(this.uniforms.uRadius,{value:.4},{value:.7,duration:3,ease:"expo.out"})}hideMask(){Le.p8.to(this.uniforms.uBaseOpacity,{value:0,duration:.8,ease:"none"}),Le.p8.to(this.uniforms.uRadius,{value:.4,duration:.8,ease:"power3.out"})}getVertexShader(){return Ut}getFragmentShader(){return"#define GLSLIFY 1\nvarying vec2 v_uv;\nvarying vec2 v_original_uv;\nuniform sampler2D uTexture;\nuniform sampler2D uDisplacement;\nuniform float uProgress;\nuniform float uBaseOpacity;\nuniform bool uEnter;\nuniform float uRadius;\nuniform float uAspectRatio;\nuniform vec2 uMouse;\n\nconst float PI = 3.1415;\n\nfloat calc_mask() {\n  vec2 n_uv = v_original_uv - vec2(0.5);\n  n_uv.x = uAspectRatio > 1.0 ? n_uv.x * uAspectRatio : n_uv.x;\n  n_uv.y = uAspectRatio < 1.0 ? n_uv.y / uAspectRatio : n_uv.y;\n\n  vec2 n_mouse = uMouse - vec2(0.5);\n  n_mouse.x = uAspectRatio > 1.0 ? n_mouse.x * uAspectRatio : n_mouse.x;\n  n_mouse.y = uAspectRatio < 1.0 ? n_mouse.y / uAspectRatio : n_mouse.y;\n\n  float d = distance(vec2(n_uv.x, n_uv.y), n_mouse);\n  float mask_alpha = (d > uRadius) ? 0.0 : 1.0 - (d / uRadius);\n\n  return mask_alpha;\n}\n\nmat2 getRotM(float angle) {\n  float s = sin(angle);\n  float c = cos(angle);\n\n  return mat2(c, -s, s, c);\n}\n\nvec4 createNoiseImage(sampler2D tex, sampler2D displaceTex, vec2 uv, bool isEnter, float progress) {\n  float intensity = 0.14;\n  float a = isEnter == true ? PI * 1.75 : PI * 0.75;\n\n  vec4 t1 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 disp = texture2D(displaceTex, uv);\n  vec2 dispVec = vec2(disp.r, disp.g);\n  vec2 distortedPosition2 = uv + getRotM(a) * dispVec * intensity * (1.0 - progress);\n  vec4 t2 = texture2D(tex, distortedPosition2);\n\n  return mix(t1, t2, progress);\n}\n\nvoid main() {\n  vec4 noiseImage = createNoiseImage(uTexture, uDisplacement, v_uv, uEnter, uProgress);\n\n  // 上下のグラデーション\n  float gradient_alpha =  (0.5 - abs(v_original_uv.y - 0.5)) * 2.0;\n\n  // マウス位置のマスク\n  float mask_alpha = calc_mask();\n\n  gl_FragColor = vec4(noiseImage.rgb, uBaseOpacity * noiseImage.a * gradient_alpha * mask_alpha);\n}\n"}}class Qt extends Kt{onLeave(){return e=this,t=void 0,s=function*(){if(!this.instance)return;if(this.uniforms.uEnter.value=!1,Te())return void fe.p8.set(this.uniforms.uBaseOpacity,{value:0});const e=[];e.push(fe.p8.to(this.uniforms.uProgress,{value:0,ease:"power3.in",duration:1.1}).then()),1!==this.scale.enter&&e.push(fe.p8.to(this.instance.scale,{x:this.coordinate.width*this.scale.leave,y:this.coordinate.height*this.scale.leave,ease:"power3.in",duration:1.1}).then()),yield Promise.all(e)},new((i=void 0)||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}));var e,t,i,s}onScroll(e){this.instance&&(this.isMobile?e<30?this.isEntered||this.enter():this.isEntered&&this.leave():(this.parallaxY=-.5*e,this.updatePosition()))}getVertexShader(){return Ut}getFragmentShader(){return Wt}}var ei="#define GLSLIFY 1\nvarying vec2 v_uv;\nvarying vec2 v_original_uv;\nuniform sampler2D uTexture;\nuniform sampler2D uDisplacement;\nuniform float uProgress;\nuniform float uBaseOpacity;\nuniform float uBaseGradient;\nuniform bool uEnter;\n\nconst float PI = 3.1415;\n\nmat2 getRotM(float angle) {\n  float s = sin(angle);\n  float c = cos(angle);\n\n  return mat2(c, -s, s, c);\n}\n\nvec4 createNoiseImage(sampler2D tex, sampler2D displaceTex, vec2 uv, bool isEnter, float progress) {\n  float intensity = 0.14;\n  float a = isEnter == true ? PI * 1.75 : PI * 0.75;\n\n  vec4 t1 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 disp = texture2D(displaceTex, uv);\n  vec2 dispVec = vec2(disp.r, disp.g);\n  vec2 distortedPosition2 = uv + getRotM(a) * dispVec * intensity * (1.0 - progress);\n  vec4 t2 = texture2D(tex, distortedPosition2);\n\n  return mix(t1, t2, progress);\n}\n\nvoid main() {\n  vec4 noiseImage = createNoiseImage(uTexture, uDisplacement, v_uv, uEnter, uProgress);\n\n  // 下のグラデーション\n  float gradient_alpha =  v_original_uv.y > 0.5 ? 1.0 : v_original_uv.y * (1.0 / 0.5);\n\n  // アニメーション中のグラデーション\n  // float max_distance = distance(vec2(0.5, 0.5), vec2(0.0, 0.0));\n  // float gradient_distance = distance(vec2(0.5, 0.5), v_original_uv);\n  // float base_gradient_alpha =  max((max_distance - gradient_distance) / max_distance, 1.0 - uBaseGradient);\n\n  float alpha = noiseImage.a * gradient_alpha * uBaseOpacity;\n  gl_FragColor = vec4(noiseImage.rgb, alpha);\n}\n";class ti extends Qt{getVertexShader(){return Ut}getFragmentShader(){return ei}}class ii{constructor(){const e=oe();this.isMobile=e.isMobile,this.instance=new Fe.ZAu}add(e){this.instance.add(e)}remove(e){this.instance.remove(e)}scroll(e){this.instance.position.y=e}}class si{update(e){return Array.from(e.querySelectorAll(".c-image-light")).forEach((e=>{const t=document.createElement("span");t.classList.add("c-image-light-mask"),e.appendChild(t)})),e}}class ni{constructor(){this.el={triggers:Array.from(document.querySelectorAll(".js-movie-trigger")),player:document.querySelector(".c-player"),overlay:document.querySelector(".l-modal-overlay"),frame:document.querySelector(".c-player-frame"),label:document.querySelector(".c-player-label"),close:document.querySelector(".c-player-close")},this.player=null,this.isCreated=!1,this.canPlay=!1,this.currentMovieId=null,this.on()}update(e){const t=Array.from(e.querySelectorAll(".js-movie-trigger"));if(!t.length)return void this.el.player.setAttribute("aria-hidden","true");if(this.el.player.removeAttribute("aria-hidden"),t.forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation();const i=e.dataset.movieId,s=e.dataset.movieLabel||"";i&&this.play(i,s)}))})),this.isCreated)return;const i=t[0].dataset.movieId;i&&this.createPlayer(i)}createPlayer(e){var t;if(this.isCreated)return;if(this.isCreated=!0,!e)return;this.currentMovieId=e,window.onYouTubeIframeAPIReady=()=>{this.player=new YT.Player("modal-player",{width:"1280",height:"720",videoId:e,playerVars:{rel:0,playsinline:1},events:{onReady:()=>{this.canPlay=!0}}})};const i=document.createElement("script");i.src="https://www.youtube.com/iframe_api";const s=document.getElementsByTagName("script")[0];null===(t=null==s?void 0:s.parentNode)||void 0===t||t.insertBefore(i,s)}on(){this.el.overlay.addEventListener("click",(()=>{this.close()})),this.el.close.addEventListener("click",(()=>{this.close()}))}play(e,t){this.canPlay&&this.player&&e&&(window.dispatchEvent(new CustomEvent(y)),this.el.player.classList.add(s),this.updateLabel(t),e===this.currentMovieId?this.player.playVideo():this.player.loadVideoById(e),this.currentMovieId=e)}close(){const e=t=>{t.target===this.el.player&&"opacity"===t.propertyName&&(this.player&&this.player.stopVideo(),this.clearLabel(),this.el.player.removeEventListener("transitionend",e))};this.el.player.addEventListener("transitionend",e),this.el.player.classList.remove(s),window.dispatchEvent(new CustomEvent(w))}updateLabel(e){this.el.label.textContent=e}clearLabel(){this.el.label.textContent=""}}var oi=i(43);class ai{constructor(e){this.el=e,this.view=se(),this.isOwnParallax=!0,this.coordinate={width:0,height:0,meshX:0,meshY:0,startY:0,endY:0},this.rate=this.parseParallaxAttribute(this.el),this.parallax=this.calcParallaxAmount(),this.translateY=0}init(){this.resize()}parseParallaxAttribute(e){const t=(e.dataset.relaxY||"0").split(",");return 1===t.length?{start:0,end:parseFloat(t[0])}:2===t.length?{start:parseFloat(t[0]),end:parseFloat(t[1])}:{start:0,end:0}}calcParallaxAmount(){return{start:this.view.canvas.height*this.rate.start,end:this.view.canvas.height*this.rate.end}}resize(){const e=Ht(this.el),t=e.startY+(this.isOwnParallax?this.translateY:0),i=e.endY+(this.isOwnParallax?this.translateY:0);this.coordinate=Object.assign(Object.assign({},e),{startY:t,endY:i}),this.parallax=this.calcParallaxAmount()}scroll(e){const t=this.isOwnParallax?this.parallax.end:0,i=this.coordinate.startY<=this.view.canvas.height+e,s=e<=this.coordinate.endY+t;if(!i||!s)return;let n=0,o=0;this.coordinate.startY<=this.view.height?(n=e,o=this.coordinate.height+this.coordinate.startY+t):(n=e+this.view.canvas.height-this.coordinate.startY,o=this.view.canvas.height+this.coordinate.height+t);const a=(0,oi.uZ)(n/o,0,1),r=this.parallax.end-this.parallax.start;this.translateY=this.parallax.start+r*a,requestAnimationFrame((()=>this.render()))}render(){this.el.style.transform=`translateY(${this.translateY}px)`}}class ri extends ai{constructor(e){super(e),this.isOwnParallax=!1,this.image=e.querySelector("img"),this.imageHeight=0}calcParallaxAmount(){return{start:0,end:this.imageHeight-this.coordinate.height}}resize(){this.coordinate=Ht(this.el),this.imageHeight=this.image.clientHeight,this.parallax=this.calcParallaxAmount()}render(){this.image.style.transform=`translateY(${this.translateY}px)`}}function li(e,t,{childSelector:i="span",baseDelay:s=0}={}){Array.from(e.querySelectorAll(i)).forEach(((e,i)=>{const n=s+t*i;e.style.setProperty("--delay",`${n}ms`)}))}class hi{constructor(){this.el={hero:null,heroHeadings:[]},this.isMobile=oe().isMobile,this.menu=je(),this.scroll=kt(),this.player=new ni,this.gradientButton=new ve,this.imageLight=new si,this.parallaxImages=[],this.parallaxElements=[]}lockScroll(){this.scroll.lock()}unlockScroll(){this.scroll.scrollTo(0,{duration:0,disableLerp:!0}),this.scroll.unlock()}recreateScroll(e){this.scroll.destroy();const t=e.querySelector("[data-scroll-container]");t&&this.scroll.create(t)}disableCurrentPageLink(e){return Array.from(e.querySelectorAll(".c-nav-link")).forEach((e=>{const t=e.href===window.location.href;t&&e.classList.add(s),e.addEventListener("click",(e=>{t&&(e.preventDefault(),e.stopPropagation())}))})),e}updateImageLight(e){return this.imageLight.update(e)}updateGradientButton(e){return this.gradientButton.update(e)}setHeadingStagger(e){const t=se();Array.from(e.querySelectorAll(".c-hero-heading-motion")).forEach((e=>{li(e,t.isSmall?60:40)}))}updatePlayer(e){this.player.update(e)}showNextPage(e){return new Promise((t=>{e.addEventListener("transitionend",(i=>{i.target===e&&t()})),e.classList.add(n)}))}hideCurrentPage(e){return new Promise((t=>{e.addEventListener("transitionend",(i=>{i.target===e&&t()})),e.classList.add(o)}))}enterMenu(){const{route:e}=zt();e().isPhilosophy||this.menu.enter()}updateActiveMenu(){this.menu.updateActive()}applyParallaxImage(e){if(this.isMobile)return;const t=Array.from(e.querySelectorAll(".c-relax-image"));this.parallaxImages=t.map((e=>new ri(e))),this.parallaxImages.forEach((e=>{e.init()}))}resizeParallaxImage(){this.isMobile||this.parallaxImages.forEach((e=>{e.resize()}))}scrollParallaxImage(e){this.isMobile||this.parallaxImages.forEach((t=>{t.scroll(e)}))}applyParallaxElement(e){if(this.isMobile)return;const t=Array.from(e.querySelectorAll(".c-relax"));this.parallaxElements=t.map((e=>new ai(e))),this.parallaxElements.forEach((e=>{e.init()}))}resizeParallaxElement(){this.isMobile||this.parallaxElements.forEach((e=>{e.resize()}))}scrollParallaxElement(e){this.isMobile||this.parallaxElements.forEach((t=>{t.scroll(e)}))}}let ci=null;class di{constructor(){this.graphic=mt()}createMeshGroups(){const e={three:new ii,fixed:new ii,scroll:new ii};return this.graphic.three.stage.add(e.three.instance),this.graphic.two.stage.add(e.fixed.instance),this.graphic.two.stage.add(e.scroll.instance),e}destroyMeshGroups(e){this.graphic.three.stage.remove(e.three.instance),this.graphic.two.stage.remove(e.scroll.instance),this.graphic.two.stage.remove(e.fixed.instance)}updateRendererGradient(){var e,t;const{route:i}=zt();i().isPhilosophy?null===(e=this.graphic)||void 0===e||e.renderer.removeGradient():null===(t=this.graphic)||void 0===t||t.renderer.addGradient()}fadeInParticle(){if(!this.graphic.two.particle)return;const{route:e}=zt();e().isPhilosophy||(this.graphic.two.particle.activate(),this.graphic.two.particle.fadeIn())}fadeOutParticle(){if(!this.graphic.two.particle)return;const e=Te()?0:.5;this.graphic.two.particle.fadeOut(e),this.graphic.two.particle.deactivate()}}let ui=null;var pi=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};class mi{constructor({pageScope:e}){this._resize=()=>{this.common.dom.resizeParallaxImage(),this.common.dom.resizeParallaxElement(),oe().isMobile||Object.values(this.heroes).forEach((e=>{e&&e.resize()})),this.onResize&&this.onResize()},this._scroll=e=>{this.common.dom.scrollParallaxImage(e.detail.scroll.y),this.common.dom.scrollParallaxElement(e.detail.scroll.y),this.group.scroll.scroll(e.detail.scroll.y),oe().isMobile||Object.values(this.heroes).forEach((t=>{t&&t.scroll(e.detail.scroll.y)})),this.onScroll&&this.onScroll(e)},this._pointerChange=e=>{oe().isMobile||this.heroes.footer&&this.heroes.footer.onPointerChange(e.detail.x,e.detail.y),this.onPointerChange&&this.onPointerChange(e)},this.pageScope=e,this.pageState={isEntered:!1,isLeaving:!1,isLoaded:!1,showParticle:!0},this.group={three:new ii,fixed:new ii,scroll:new ii},this.heroes={header:null,footer:null},this.common={dom:ci||(ci=new hi,ci),graphic:ui||(ui=new di,ui)},this.graphic=mt(),this.loading=Se(),this._listener=new Me}preload(e){return pi(this,void 0,void 0,(function*(){const t=[pe(500)];this.onPreload&&t.push(...this.onPreload(e)),yield this.loading.progress(t),this.pageState.isLoaded=!0}))}enter(e,t,i){return pi(this,void 0,void 0,(function*(){document.body.dataset.menuTransition="false",this.pageState.isEntered=!0,this.common.dom.unlockScroll(),yield pe(16),this.common.dom.recreateScroll(e),this.common.dom.disableCurrentPageLink(e),this.common.dom.updateImageLight(e),this.common.dom.updateGradientButton(e),this.group=this.common.graphic.createMeshGroups(),this.onMounted&&(yield this.onMounted(e)),this.common.dom.setHeadingStagger(e),this.common.dom.applyParallaxImage(e),this.common.dom.applyParallaxElement(e);const t=Ft();this.common.dom.scrollParallaxImage(t),this.common.dom.scrollParallaxElement(t),document.documentElement.style.setProperty("--vh-on-transition",`${window.innerHeight}px`),this._on(),yield me((()=>this.pageState.isLoaded)),yield pe(32),this.common.dom.showNextPage(e),this.common.graphic.updateRendererGradient(),this.common.dom.updateActiveMenu(),this.common.dom.enterMenu();const s=[this._enterHero(e),pe(1e3)];this.onEnter&&s.push(this.onEnter(e,i)),yield Promise.all(s),this.pageState.showParticle&&this.common.graphic.fadeInParticle(),this.onEntered&&this.onEntered(e,i),this.common.dom.updatePlayer(e),kt().smoothScroll(e)}))}leave(e){return pi(this,void 0,void 0,(function*(){this.pageState.isEntered=!1,this.pageState.isLeaving=!0,this.common.dom.lockScroll(),this.common.dom.hideCurrentPage(e),this.common.graphic.fadeOutParticle();const t=[this._leaveHero(),pe(700)];this.onLeave&&t.push(this.onLeave(e)),yield Promise.all(t),this.pageState.isLeaving=!1,this._off(),this.onDestroy&&this.onDestroy(e),this.common.graphic.destroyMeshGroups(this.group)}))}createHeroHeader(e){if(oe().isMobile)return;const t=e.querySelector(".c-large-hero-image");t&&(this.heroes.header=new ti(t))}createHeroFooter(e){if(oe().isMobile)return;const t=e.querySelector(".c-next-hero");t&&(this.heroes.footer=new Jt(t))}_on(){this._listener.on(window,m,this._scroll),this._listener.on(window,u,this._resize),this._listener.on(window,p,this._resize),this._listener.on(window,E,this._pointerChange)}_off(){this._listener.clear()}_enterHero(e){return pi(this,void 0,void 0,(function*(){yield Promise.all([(()=>pi(this,void 0,void 0,(function*(){yield pe(400);const t=e.querySelector(".hero, .c-hero, .c-about-hero"),i=Array.from(e.querySelectorAll(".c-hero-heading-motion-begin"));t&&t.classList.add(n),i.forEach((e=>{e.classList.add(n)}))})))(),(()=>pi(this,void 0,void 0,(function*(){if(oe().isMobile)return Promise.resolve();this.createHeroHeader(e),this.createHeroFooter(e),yield Promise.all(Object.entries(this.heroes).map((([e,t])=>pi(this,void 0,void 0,(function*(){t&&(yield t.create(),"header"===e&&t.enter(),t.instance&&this.group.scroll.add(t.instance))})))))})))()])}))}_leaveHero(){return pi(this,void 0,void 0,(function*(){oe().isMobile||(yield Promise.all(Object.values(this.heroes).map((e=>e?e.leave():Promise.resolve()))))}))}}const vi=[{elementType:"labels",stylers:[{color:"#9799ba"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"landscape",stylers:[{color:"#272737"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{color:"#313141"}]},{featureType:"road.local",stylers:[{color:"#313141"}]},{featureType:"water",stylers:[{color:"#6e6e81"}]}];function gi(){Array.from(document.querySelectorAll(".custom-map")).forEach((e=>{const t=e.dataset.mapLat,i=e.dataset.mapLng;t&&i&&function(e,t,i){const s={lat:t,lng:i},n=new google.maps.Map(e,{center:s,zoom:15,styles:vi,mapTypeControl:!1,zoomControl:!1,scaleControl:!1,streetViewControl:!1,fullscreenControl:!1}),o={path:"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z",fillColor:"#6767b7",fillOpacity:1,strokeWeight:0,rotation:0,scale:1.5,anchor:new google.maps.Point(12,24)};new google.maps.Marker({position:s,map:n,icon:o})}(e,parseFloat(t),parseFloat(i))}))}class fi{constructor(e,{name:t,label:i,validators:s,watch:n=!0},o="ja"){const a=e.querySelector(`[data-validation-error="${t}"]`);if(!a)throw new Error(`エラーの出力先が見つかりません [name="${t}"]`);if(this.el={targets:Array.from(e.querySelectorAll(`[name="${t}"]`)),error:a},!this.el.targets.length)throw new Error(`バリデーション対象の要素が見つかりません。 [name="${t}"]`);if(!this.el.error)throw new Error(`バリデーションエラーの要素が見つかりません。 [data-validation-error="${t}"]`);this.name=t,this.label=i,this.validators=s,this.lang=o,this.type=this.getType(this.el.targets),this.isValidated=!1,this.messages={},n&&this.watch()}getType(e){const t=e[0],i=t.tagName.toLowerCase();if("select"===i)return"select";if("textarea"===i)return"textarea";if("input"===i){const e=t.getAttribute("type");if(!e)throw new Error("バリデーション対象のinputタグにtype属性が設定されていません");return"radio"===e?"radio":"checkbox"===e?"checkbox":e}throw new Error("バリデーション対象に予期しない要素が設定されています")}getValue(){return["checkbox","radio"].includes(this.type)?this.el.targets.filter((e=>e.checked)).map((e=>e.value)):this.el.targets[0].value}getMessages(){return Object.values(this.messages)}hasError(){return this.getMessages().length>0}watch(){["checkbox","radio","select"].includes(this.type)?this.el.targets.forEach((e=>{e.addEventListener("change",(()=>this.validate()))})):this.el.targets.forEach((e=>{e.addEventListener("input",(()=>{this.isValidated&&this.validate()})),e.addEventListener("blur",(()=>{this.validate()}))}))}validate(){const e=this.getValue();this.validators.forEach((t=>{const i=t(e,this.label);i.isValid?this.messages[i.key]&&delete this.messages[i.key]:this.messages[i.key]=i.message[this.lang]})),this.isValidated=!0,this.hasError()?(this.el.error.textContent=this.getMessages()[0],this.el.error.classList.add("is-visible")):(this.el.error.textContent="",this.el.error.classList.remove("is-visible"))}}class yi{constructor(e,t,i="ja"){this.validations=t.map((t=>new fi(e,t,i)))}validate(){this.validations.forEach((e=>e.validate()))}hasError(){return this.validations.filter((e=>e.hasError())).length>0}}const wi=(e,t)=>({key:"required",isValid:Array.isArray(e)?e.length>0:"string"==typeof e?""!==e.trim():"number"==typeof e,message:{en:`${t} is required`,ja:`${t}は必須項目です`}}),xi=(e,t)=>({key:"email",isValid:!Array.isArray(e)&&(""===e||/^\S+@\S+\.\S+$/.test(e)),message:{en:`${t} format is invalid`,ja:`${t}のフォーマットが正しくありません`}}),bi=(e,t)=>({key:"tel",isValid:!Array.isArray(e)&&(""===e||/^\+?\d+(?:\d|-)*$/.test(e)),message:{en:`${t} format is invalid`,ja:`${t}のフォーマットが正しくありません`}});function Si(e,t){e&&t&&e.parentNode&&e.parentNode.insertBefore(t,e)}function Ei(e,t){const i=e.querySelector(`[name="${t}"]`);if(!i)return"";const s=i.closest(".form-control");if(!s)return"";const n=s.querySelector(".form-label");if(!n)return"";let o="";for(const e of n.childNodes)"#text"===e.nodeName&&(o+=e.nodeValue);return o}class Li{constructor(){this.scroll=kt()}update(e){const t=e.querySelector(".c-category");t&&(this.toggleFixedNavigationPopup(t),this.jumpOnChangeSelection(t))}toggleFixedNavigationPopup(e){const t=oe(),i=Array.from(e.querySelectorAll(".c-category-popup"));if(!i.length)return;const n=e=>{e.classList.contains(s)||(e.classList.add(s),this.scroll.lock())},o=e=>{e.classList.contains(s)&&(e.classList.remove(s),this.scroll.unlock())};i.forEach((e=>{const a=e.querySelector(".c-category-action--trigger");a&&(a.addEventListener("click",(t=>{t.stopPropagation(),e.classList.contains(s)?o(e):n(e)})),t.isMobile||(e.addEventListener("mouseenter",(()=>{i.forEach((e=>o(e))),n(e)})),e.addEventListener("mouseleave",(()=>{o(e)}))))}))}jumpOnChangeSelection(e){const t=Array.from(e.querySelectorAll(".c-category-select-input"));t.length&&t.forEach((e=>{e.addEventListener("change",(()=>{e.value&&(Dt().go(e.value),e.value="")}))}))}}let Pi=null;function Ai(){return Pi||(Pi=new Li),Pi}var ki=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};const Mi="c-carousel-label-item",Ci="is-grabbing";class Oi{constructor(e){this.close=()=>{this.isMobile&&(0,Pe.Un)(this.el.carousel),this.fadeOut(),this.off()},this.prev=()=>{0!==this.index&&this.slideTo(this.index-1)},this.next=()=>{this.index!==this.total-1&&this.slideTo(this.index+1)},this.resize=()=>{setTimeout((()=>{this.updateGap(),this.updateItems(),this.updateSize(),this.slideTo(this.index,{animate:!1})}),16)},this.touchstart=e=>{this.isTouching=!0,this.touchStartTime=Date.now(),this.touchStartX=e.changedTouches[0].clientX},this.touchmove=e=>{this.isTouching&&this.moveX(this.touchStartX-e.changedTouches[0].clientX)},this.touchend=e=>{this.isTouching&&(this.isTouching=!1,this.isAnimating=!1,this.handleStop(e.changedTouches[0].clientX))},this.mousedown=e=>{this.isTouching=!0,this.touchStartTime=Date.now(),this.touchStartX=e.clientX,this.updateGrabbingClassName(),document.body.addEventListener("mousemove",this.mousemove),document.body.addEventListener("mouseup",this.mouseup),document.body.addEventListener("mouseleave",this.mouseleave)},this.mousemove=e=>{this.isTouching&&this.moveX(this.touchStartX-e.clientX)},this.mouseup=e=>{this.isTouching&&(this.isTouching=!1,this.isAnimating=!1,this.handleStop(e.clientX),this.updateGrabbingClassName()),document.body.removeEventListener("mousemove",this.mousemove),document.body.removeEventListener("mouseup",this.mouseup),document.body.removeEventListener("mouseleave",this.mouseleave)},this.mouseleave=e=>{e.target===document.body&&this.mouseup(e)};const t=oe();this.el=this.findElements(e),this.items=[],this.total=0,this.gap=0,this.index=-1,this.isMobile=t.isMobile,this.isAnimating=!1,this.isTouching=!1,this.x=0,this.touchIndex=0,this.touchStartX=0,this.touchStartTime=0}create(e){this.el=this.findElements(e),this.updateItems(),this.createLabels()}open(e){return ki(this,void 0,void 0,(function*(){this.updateGap(),this.updateSize(),this.slideTo(e,{animate:!1}),this.on(),yield pe(16),this.isMobile&&(0,Pe.dR)(this.el.carousel),this.fadeIn()}))}fadeIn(){this.el.carousel.classList.add(s)}fadeOut(){const e=t=>{t.target===this.el.carousel&&"opacity"===t.propertyName&&this.el.carousel.removeEventListener("transitionend",e)};this.el.carousel.addEventListener("transitionend",e),this.el.carousel.classList.remove(s)}slideTo(e,{animate:t=!0}={}){return ki(this,void 0,void 0,(function*(){const i=se(),s=this.items[e];this.x=i.width/2-s.x+s.width/2,this.index=e,this.updateClassName(),t?(this.isAnimating=!0,yield Le.p8.to(this.el.list,{x:this.x,duration:1,ease:"power3.out"}).then(),this.isAnimating=!1):Le.p8.set(this.el.list,{x:this.x})}))}on(){window.addEventListener(d,this.resize),this.el.prev.addEventListener("click",this.prev),this.el.next.addEventListener("click",this.next),this.el.close.addEventListener("click",this.close),this.el.overlay.addEventListener("click",this.close),this.isMobile?(this.el.list.addEventListener("touchstart",this.touchstart),this.el.list.addEventListener("touchmove",this.touchmove),this.el.list.addEventListener("touchend",this.touchend),this.el.items.forEach(((e,t)=>{e.addEventListener("touchstart",(()=>{this.touchIndex=t}))}))):(this.el.list.addEventListener("mousedown",this.mousedown),this.el.items.forEach(((e,t)=>{e.addEventListener("mousedown",(()=>{this.touchIndex=t}))})))}off(){window.removeEventListener("resize",this.resize)}moveX(e){Le.p8.set(this.el.list,{x:this.x-e})}resetMoveX(){this.isAnimating||Le.p8.to(this.el.list,{x:this.x,duration:.8,ease:"power3.out"})}handleStop(e){const t=Date.now()-this.touchStartTime;if(this.index!==this.touchIndex&&t<500)return void this.slideTo(this.touchIndex);const i=e-this.touchStartX;t<500?i<-30?this.index===this.total-1?this.resetMoveX():this.next():i>30?0===this.index?this.resetMoveX():this.prev():this.resetMoveX():this.resetMoveX()}findElements(e){const t=e.querySelector(".c-carousel");if(!t)throw new Error("Galleryの要素が見つかりません");const i=t.querySelector(".c-carousel-list"),s=Array.from(t.querySelectorAll(".c-carousel-item")),n=t.querySelector(".c-carousel-label-list"),o=Array.from(t.querySelectorAll(`.${Mi}`)),a=t.querySelector(".c-carousel-nav-prev"),r=t.querySelector(".c-carousel-nav-next"),l=t.querySelector(".l-modal-overlay"),h=t.querySelector(".l-modal-close");if(!(i&&s.length&&a&&r&&l&&h))throw new Error("Galleryのスライダーに必要な要素が見つかりません");return{carousel:t,list:i,items:s,labelList:n,labelItems:o,prev:a,next:r,overlay:l,close:h}}updateGap(){if(this.el.items.length>=2){const e=window.getComputedStyle(this.el.items[1]).marginLeft;this.gap=ce(parseFloat(e),2)}else this.gap=0}updateItems(){this.items=this.el.items.map((e=>{const t=e.querySelector(".c-carousel-caption");return{el:e,label:t&&t.textContent||"",width:0,x:0}})),this.total=this.items.length}createLabels(){this.el.labelList&&(this.el.labelList.innerHTML="",this.items.forEach((e=>{if(!this.el.labelList)return;const t=document.createElement("li");t.classList.add(Mi),t.classList.add("l-modal-label"),t.textContent=e.label,this.el.labelList.appendChild(t)})),this.el.labelItems=Array.from(this.el.carousel.querySelectorAll(`.${Mi}`)))}updateSize(){let e=0;this.items=this.items.map(((t,i)=>{const s=ce(t.el.clientWidth,2),n=i>0?this.gap:0,o=e+s+n;return e+=s+n,{el:t.el,label:t.label,width:s,x:o}}))}updateClassName(){this.updateSlideClassName(),this.updateNavClassName(),this.updateLabelClassName()}updateSlideClassName(){Array.from(document.querySelectorAll(".c-carousel-item.is-active")).forEach((e=>{e.classList.remove(s)})),this.items[this.index].el.classList.add(s)}updateNavClassName(){0===this.index?this.el.prev.classList.contains(l)||this.el.prev.classList.add(l):this.el.prev.classList.contains(l)&&this.el.prev.classList.remove(l),this.index===this.total-1?this.el.next.classList.contains(l)||this.el.next.classList.add(l):this.el.next.classList.contains(l)&&this.el.next.classList.remove(l)}updateLabelClassName(){return ki(this,void 0,void 0,(function*(){this.el.labelList&&this.el.labelItems&&(Array.from(document.querySelectorAll(`.${Mi}.is-enter`)).forEach((e=>{e.classList.add(o)})),this.el.labelItems[this.index].classList.remove(n),this.el.labelItems[this.index].classList.remove(o),yield pe(200),this.el.labelItems[this.index].classList.add(n))}))}updateGrabbingClassName(){this.isTouching?this.el.list.classList.add(Ci):this.el.list.classList.remove(Ci)}}var _i=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};class Ii{constructor(){this.el={texts:[]}}init(){const e=se();this.el.texts=Array.from(document.querySelectorAll(`.message-container-${e.suffix} .message-text`))}show(e){return this.el.texts[e].classList.remove(n),this.el.texts[e].classList.remove(o),setTimeout((()=>{this.el.texts[e].classList.add(n)}),32),Promise.resolve()}hide(e){this.el.texts[e].classList.add(o)}hideAll(){Array.from(document.querySelectorAll(".message-text.is-enter:not(.is-leave)")).forEach((e=>{e.classList.add(o)}))}}var zi=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};class Ti extends Nt{constructor(e,t){super(),this.geometry=null,this.material=null,this.color=e,this.z=t}onCreate(){const e=se();return this.geometry=new Fe._12(1,1),this.material=new Fe.vBJ({color:this.color,transparent:!0,opacity:0}),this.instance=new Fe.Kj0(this.geometry,this.material),this.instance.scale.set(e.canvas.width,e.canvas.height,1),this.instance.position.z=this.z,Promise.resolve()}onEnter(){return zi(this,void 0,void 0,(function*(){yield fe.p8.to(this.material,{opacity:1,duration:1,ease:"none"}).then()}))}onLeave(){return zi(this,void 0,void 0,(function*(){yield fe.p8.to(this.material,{opacity:0,duration:1,ease:"none"}).then()}))}onResize(){const e=se();this.instance&&this.instance.scale.set(e.canvas.width,e.canvas.height,1)}}var qi=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};class Ri extends Nt{constructor(){super(),this.uniforms={uRadius:{value:.5},uAspectRatio:{value:1},uBaseOpacity:{value:.7},uForceBlack:{value:0},uMouse:{value:new Fe.FM8(.5,.5)}},this.leaveDuration=0}onCreate(){const e=se(),t=new Fe._12(1,1),i=new Fe.jyz({uniforms:this.uniforms,vertexShader:"#define GLSLIFY 1\nvarying vec2 v_uv;\nvarying vec2 v_original_uv;\n\nvoid main() {\n  v_original_uv = uv;\n  v_uv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 v_uv;\nuniform vec2 uMouse;\nuniform float uRadius;\nuniform float uBaseOpacity;\nuniform float uForceBlack;\nuniform float uAspectRatio;\n\nfloat calc_mask() {\n  vec2 n_uv = v_uv - vec2(0.5);\n  n_uv.x = uAspectRatio > 1.0 ? n_uv.x * uAspectRatio : n_uv.x;\n  n_uv.y = uAspectRatio < 1.0 ? n_uv.y / uAspectRatio : n_uv.y;\n\n  vec2 n_mouse = uMouse - vec2(0.5);\n  n_mouse.x = uAspectRatio > 1.0 ? n_mouse.x * uAspectRatio : n_mouse.x;\n  n_mouse.y = uAspectRatio < 1.0 ? n_mouse.y / uAspectRatio : n_mouse.y;\n\n  float d = distance(vec2(n_uv.x, n_uv.y), n_mouse);\n  float mask_alpha = (d > uRadius) ? uBaseOpacity : uBaseOpacity * (d / uRadius);\n\n  return mask_alpha;\n}\n\nvoid main(){\n  vec4 mask = vec4(0.0, 0.0, 0.0, calc_mask());\n  vec4 complete_black = vec4(0.0, 0.0, 0.0, 1.0);\n\n  gl_FragColor = mix(mask, complete_black, uForceBlack);\n}\n",transparent:!0});return this.instance=new Fe.Kj0(t,i),this.instance.scale.set(e.canvas.width,e.canvas.height,1),this.instance.position.z=10,Promise.resolve()}onEnter(){return qi(this,void 0,void 0,(function*(){return this.uniforms.uRadius.value=1,this.uniforms.uBaseOpacity.value=.7,this.uniforms.uForceBlack.value=0,Promise.resolve()}))}onLeave(){return qi(this,void 0,void 0,(function*(){return fe.p8.set(this.uniforms.uForceBlack,{value:1}),Promise.resolve()}))}setLeaveDuration(e){return this.leaveDuration=e,this}animateRadius(e){return qi(this,void 0,void 0,(function*(){yield fe.p8.timeline().to(this.uniforms.uRadius,{value:Math.max(.3,.6*e),duration:2,ease:"power3.in"}).to(this.uniforms.uRadius,{value:Math.max(.5,e),duration:5,ease:"power3.out"}).then()}))}reset(){this.uniforms.uRadius.value=0,this.uniforms.uRadius.value=0}onResize(){if(this.instance){const e=se();this.instance.scale.set(e.canvas.width,e.canvas.height,1),this.uniforms.uAspectRatio.value=e.canvas.width/e.canvas.height}}moveMask(e,t){const i=se(),s=e/i.canvas.width,n=(i.canvas.height-t)/i.canvas.height;fe.p8.to(this.uniforms.uMouse.value,{x:s,y:n,duration:3,ease:"power3.out"})}}var Di=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};const Yi=`${J}/models/seirei.glb`;class ji extends Nt{constructor(){super(),this.clock=new Fe.SUY,this.speed=.04,this.isRendering=!1,this.position={animation:new Fe.Pa4,wave:new Fe.Pa4},this.rotation={animation:new Fe.Pa4,wave:new Fe.Pa4,hold:new Fe.Pa4},this.wave={position:new Fe.Pa4(-.6,1,0),rotation:new Fe.Pa4(0,Ke(10),Ke(2))}}onPreload(){return Di(this,void 0,void 0,(function*(){var e;this.instance=yield(e=Yi,new Promise((t=>{const i=new Ve.E,s=new Ge._;s.setDecoderPath(`${J}/js/draco/`),i.setDRACOLoader(s),i.load(e,(e=>{t(e.scene)}))})))}))}onEnter(){return Di(this,void 0,void 0,(function*(){this.instance&&(fe.p8.fromTo(this.position.animation,{y:-40},{y:0,duration:4.2,ease:"power4.out"}),yield fe.p8.fromTo(this.rotation.animation,{y:-Ke(180)},{y:0,duration:5,ease:"power4.out"}).then())}))}startRender(){this.isRendering=!0,this.render()}stopRender(){this.isRendering=!1}hold(){this.instance&&fe.p8.to(this.rotation.hold,{y:Ke(2),duration:3,ease:"sin.inOut"}).then()}resetHold(){this.instance&&fe.p8.to(this.rotation.hold,{y:0,duration:6,ease:"power3.out"}).then()}render(){if(!this.isRendering||!this.instance)return;const e=this.clock.getElapsedTime(),t=this.speed*e;this.position.wave.x=this.wave.position.x*Math.sin(t),this.position.wave.y=this.wave.position.y*Math.sin(t),this.rotation.wave.y=this.wave.rotation.y*Math.sin(t),this.rotation.wave.z=this.wave.rotation.z*Math.sin(t),this.instance.position.set(this.position.animation.x+this.position.wave.x,this.position.animation.y+this.position.wave.y,this.position.animation.z+this.position.wave.z),this.instance.rotation.set(this.rotation.animation.x+this.rotation.wave.x+this.rotation.hold.x,this.rotation.animation.y+this.rotation.wave.y+this.rotation.hold.y,this.rotation.animation.z+this.rotation.wave.z+this.rotation.hold.x),requestAnimationFrame((()=>this.render()))}}function Fi({mask:e,architecture:t}){return e.animateRadius(.55),t.enter(),Promise.resolve()}function $i({mask:e,graphic:t}){return e.animateRadius(.9),t.three.camera.changeCoordinate(Qe),fe.p8.to(t.three.camera.polar,{y:4.5,r:15.6,angle:0,duration:4.2,ease:"power3.inOut"}),fe.p8.to(t.three.camera.lookAt,{x:6.2,y:9.8,z:0,duration:4.2,ease:"power3.inOut"}),fe.p8.to(t.three.ambientLight.state,{intensity:0,duration:4.2,ease:"power3.inOut"}),fe.p8.to(t.three.directionalLight.state,{intensity:.8,duration:3,ease:"power3.inOut"}),fe.p8.to(t.three.directionalLight.state.position,{x:5,y:29,z:-33,duration:3,ease:"power3.inOut"}),Promise.resolve()}function Hi({mask:e,graphic:t}){return e.animateRadius(1),t.three.camera.changeCoordinate(Qe),fe.p8.to(t.three.camera.polar,{y:7.1,r:11.6,angle:-205.9,duration:4.2,ease:"power3.inOut"}),fe.p8.to(t.three.camera.lookAt,{x:-7,y:7.1,z:3.6,duration:4.2,ease:"power3.inOut"}),fe.p8.to(t.three.ambientLight.state,{intensity:.3,duration:4.2,ease:"power3.inOut"}),fe.p8.to(t.three.directionalLight.state,{intensity:2,duration:4.2,delay:1,ease:"power3.inOut"}),fe.p8.to(t.three.directionalLight.state.position,{x:44,y:51,z:100,duration:4.2,delay:1,ease:"power3.inOut"}),Promise.resolve()}function Bi({mask:e,graphic:t}){return e.animateRadius(1),t.three.camera.changeCoordinate(et),fe.p8.to(t.three.camera.position,Object.assign(Object.assign({},Je({y:2.7,r:10.3,angle:32.3})),{duration:4.2,ease:"power3.inOut"})),fe.p8.to(t.three.camera.lookAt,{x:4.5,y:8,z:5.4,duration:4.2,ease:"power3.inOut"}),fe.p8.to(t.three.ambientLight.state,{intensity:.1,duration:4.2,ease:"power3.inOut"}),fe.p8.to(t.three.directionalLight.state,{intensity:2.2,duration:4.2,delay:1,ease:"power3.inOut"}),fe.p8.to(t.three.directionalLight.state.position,{x:49,y:100,z:9,duration:4.2,delay:1,ease:"power3.inOut"}),Promise.resolve()}function Gi({mask:e,graphic:t}){return e.animateRadius(1),t.three.camera.changeCoordinate(Qe),fe.p8.set(t.three.camera.polar,{angle:32.3}),fe.p8.to(t.three.camera.polar,{y:32.44,r:17.77,angle:162,duration:4.2,ease:"power3.inOut"}),fe.p8.to(t.three.camera.lookAt,{x:11.53,y:1.82,z:8.88,duration:4.2,delay:.3,ease:"power3.inOut"}),fe.p8.to(t.three.ambientLight.state,{intensity:.25,duration:4.2,ease:"power3.inOut"}),fe.p8.to(t.three.directionalLight.state,{intensity:1,duration:4.2,delay:1,ease:"power3.inOut"}),fe.p8.to(t.three.directionalLight.state.position,{x:13,y:9,z:-17,duration:4.2,delay:1,ease:"power3.inOut"}),Promise.resolve()}function Vi({mask:e,graphic:t}){return e.animateRadius(1),t.three.camera.changeCoordinate(Qe),fe.p8.to(t.three.camera.polar,{y:2,r:17.4,angle:151.4,duration:5,ease:"power3.inOut"}),fe.p8.to(t.three.camera.lookAt,{x:22.1,y:25.6,z:7.1,duration:4.2,ease:"power2.inOut"}),fe.p8.to(t.three.ambientLight.state,{intensity:.3,duration:4.2,ease:"power3.inOut"}),fe.p8.to(t.three.directionalLight.state,{intensity:4.6,duration:5,delay:1,ease:"power3.inOut"}),fe.p8.to(t.three.directionalLight.state.position,{x:11,y:22,z:16,duration:5,delay:1,ease:"power3.inOut"}),Promise.resolve()}function Ni(){return e=this,t=void 0,n=function*(){const e=document.querySelector(".l-page-independence .entry"),t=document.querySelector(".l-page-independence .entry .c-menu");if(!e||!t)return;const i=ze(e);i.create(),yield pe(4200),je().leave(),e.classList.remove(s),t.classList.remove(s),yield pe(16),e.classList.add(s),t.classList.add(s),i.show()},new((i=void 0)||(i=Promise))((function(s,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function r(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}));var e,t,i,n}var Xi=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};class Wi extends Qt{getVertexShader(){return Ut}getFragmentShader(){return ei}}class Ui{constructor(){this.indexes=["01","02","03"].map((e=>[Math.random(),e])).sort(((e,t)=>e[0]-t[0])).map((e=>e[1])),this.currentIndex=0}create(e){const t=e.querySelector(".c-large-hero-image"),i=document.createElement("picture"),s=document.createElement("source"),n=document.createElement("img");return s.setAttribute("srcset",this.buildImagePath("sp")),s.setAttribute("media","(max-width: 834px)"),n.setAttribute("src",this.buildImagePath("pc")),i.appendChild(s),i.appendChild(n),t.appendChild(i),t}next(){this.currentIndex=this.currentIndex===this.indexes.length-1?0:this.currentIndex+1}buildImagePath(e){const t=this.indexes[this.currentIndex];return`${Q}/project-archive/hero${t}_${e}.jpg`}}let Zi=null;class Ki extends Qt{constructor(e){super(e),this.baseOpacity=.8,this.uniforms.uBaseOpacity.value=.8}getVertexShader(){return Ut}getFragmentShader(){return"#define GLSLIFY 1\nvarying vec2 v_uv;\nvarying vec2 v_original_uv;\nuniform sampler2D uTexture;\nuniform sampler2D uDisplacement;\nuniform float uProgress;\nuniform float uBaseOpacity;\nuniform bool uEnter;\n\nconst float PI = 3.1415;\n\nmat2 getRotM(float angle) {\n  float s = sin(angle);\n  float c = cos(angle);\n\n  return mat2(c, -s, s, c);\n}\n\nvec4 createNoiseImage(sampler2D tex, sampler2D displaceTex, vec2 uv, bool isEnter, float progress) {\n  float intensity = 0.14;\n  float a = isEnter == true ? PI * 1.75 : PI * 0.75;\n\n  vec4 t1 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 disp = texture2D(displaceTex, uv);\n  vec2 dispVec = vec2(disp.r, disp.g);\n  vec2 distortedPosition2 = uv + getRotM(a) * dispVec * intensity * (1.0 - progress);\n  vec4 t2 = texture2D(tex, distortedPosition2);\n\n  return mix(t1, t2, progress);\n}\n\nvoid main() {\n  vec4 noiseImage = createNoiseImage(uTexture, uDisplacement, v_uv, uEnter, uProgress);\n\n  // 上下のグラデーション\n  float gradient_alpha =  (0.5 - abs(v_original_uv.y - 0.5)) * 2.0;\n\n  gl_FragColor = vec4(noiseImage.rgb, noiseImage.a * gradient_alpha * uBaseOpacity);\n}\n"}}class Ji{constructor(e){this.el=this.findElements(e),this.articleCoordinate=Ht(this.el.article),this.visitor=oe(),this.view=se(),this.momentumScroll=kt(),this.setStagger(),this.resize()}updateElement(e){this.el=this.findElements(e),this.setStagger(),this.resize()}setStagger(){li(this.el.heading,30,{baseDelay:300})}resize(){this.articleCoordinate=Ht(this.el.article),this.scroll(this.momentumScroll.getScrollY())}scroll(e){this.visitor.isMobile||.75*this.view.height+e<this.articleCoordinate.startY&&(this.el.heading.style.transform=`translate3d(0, ${e}px, 0)`)}findElements(e){const t=e.querySelector(".hero-heading"),i=e.querySelector(".article");if(!t||!i)throw new Error("Projectの見出しが見つかりません");return{heading:t,article:i}}}const Qi={[P]:P,[A]:A,[k]:A,[M]:A,[C]:A,[O]:O,[_]:_,[I]:I,[z]:z,[T]:T,[q]:T,[R]:T,[D]:T,[Y]:Y,[j]:j,[F]:j,[$]:j,[H]:j,[B]:B,[G]:B,[V]:B,[N]:B,[X]:B,[W]:B,[U]:U,[Z]:Z,[K]:K},es={[L]:class extends mi{},[P]:class extends mi{constructor(e){super(e),this.stopTouchEvent=e=>{e.stopPropagation()},this.preventTouchEvent=e=>{e.preventDefault()},this.stopMouseEvent=e=>{e.stopPropagation()},this.openMenu=()=>{this.cancelAutoplay()},this.closeMenu=()=>{setTimeout((()=>{this.autoplay()}),1500)},this.prev=()=>Xi(this,void 0,void 0,(function*(){null===this.sceneIndex||this.isFirstScene()||(yield this.toScene(this.sceneIndex-1))})),this.next=()=>Xi(this,void 0,void 0,(function*(){null===this.sceneIndex||this.isLastScene()||(yield this.toScene(this.sceneIndex+1))})),this.el={container:document.querySelector(".l-container"),message:document.querySelector(".message"),entry:document.querySelector(".entry"),frame:document.querySelector(".l-frame")},this.isMoving=!1,this.hasGui=!1,this.shouldAutoplay=!0,this.autoplayTimer=null,this.listener=new Me,this.blackBg=new Ti("#000",15),this.mask=new Ri,this.message=new Ii,this.architecture=new ji,this.sceneIndex=null,this.scenes=[Fi,$i,Hi,Bi,Gi,Vi,Ni],this.totalScene=this.scenes.length,this.lastSceneIndex=this.totalScene-1,this.isEnterArchitecture=!1}onMounted(){return this.sceneIndex=null,this.el.container=document.querySelector(".l-container"),this.el.message=document.querySelector(".message"),this.el.entry=document.querySelector(".entry"),this.el.frame=document.querySelector(".l-frame"),this.message.init(),Promise.resolve()}onPreload(){return[this.architecture.preload()]}onEnter(e,t){return Xi(this,void 0,void 0,(function*(){return ge(),this.graphic.enable3d(),this.architecture.startRender(),this.updateLight(),this.updateCamera(),this.on(),yield this.mountMeshes(),this.mask.reset(),this.addGui(),this.opening(t),Promise.resolve()}))}onLeave(){return Xi(this,void 0,void 0,(function*(){this.off(),this.message.hideAll(),this.graphic.three.particle.fadeOut(0),yield this.mask.leave()}))}onDestroy(){this.architecture.stopRender(),this.graphic.disable3d()}onResize(){this.blackBg.resize(),this.mask.resize()}onPointerChange(e){const{x:t,y:i}=e.detail;this.mask.moveMask(t,i)}on(){this.listener.on(window,g,this.openMenu),this.listener.on(window,f,this.closeMenu),oe().isMobile&&(this.listener.on(this.el.message,"touchstart",this.preventTouchEvent,{passive:!1}),this.listener.on(document,"touchmove",this.preventTouchEvent,{passive:!1}),this.listener.on(this.el.message,"touchend",this.preventTouchEvent,{passive:!1}),this.listener.on(this.el.entry,"touchmove",this.stopTouchEvent,{passive:!1}))}off(){this.listener.clear()}opening(e){return Xi(this,void 0,void 0,(function*(){this.loading.hideAtPhilosophy(),setTimeout((()=>{je().enter()}),1300),e?yield pe(2500):yield pe(500),this.message.show(0),yield pe(2300),this.message.hideAll(),yield pe(1900),this.blackBg.leave(),this.graphic.three.particle.fadeIn(),this.toScene(0)}))}updateLight(){fe.p8.set(this.graphic.three.ambientLight.state,{intensity:0}),fe.p8.set(this.graphic.three.directionalLight.state,{intensity:2}),fe.p8.set(this.graphic.three.directionalLight.state.position,{x:54,y:20,z:24})}updateCamera(){this.graphic.three.camera.changeCoordinate(Qe),fe.p8.set(this.graphic.three.camera.polar,{y:22,r:10,angle:-165}),fe.p8.set(this.graphic.three.camera.lookAt,{x:0,y:0,z:0})}mountMeshes(){return Xi(this,void 0,void 0,(function*(){yield Promise.all([this.blackBg.create(),this.mask.create()]),this.blackBg.instance&&(this.group.fixed.add(this.blackBg.instance),yield this.blackBg.enter()),this.mask.instance&&(this.group.fixed.add(this.mask.instance),this.mask.enter()),this.architecture.instance&&this.group.three.add(this.architecture.instance),this.onResize()}))}isFirstScene(){return 0===this.sceneIndex}isLastScene(){return this.sceneIndex===this.lastSceneIndex}autoplay(){!this.shouldAutoplay||this.isMoving||this.isLastScene()||(this.autoplayTimer=window.setTimeout((()=>{this.shouldAutoplay&&this.next(),this.autoplayTimer=null}),5800))}cancelAutoplay(){null!==this.autoplayTimer&&window.clearTimeout(this.autoplayTimer)}toScene(e){return Xi(this,void 0,void 0,(function*(){if(this.isMoving)return Promise.resolve();if(e<0||e>this.lastSceneIndex||e===this.sceneIndex)return Promise.resolve();this.cancelAutoplay(),this.isMoving=!0;const t=this.sceneIndex;this.sceneIndex=e,e>=6?(this.isEnterArchitecture||null===t)&&(this.isEnterArchitecture=!1,this.leaveArchitecture()):this.isEnterArchitecture=!0,this.message.hideAll(),this.isLastScene()?setTimeout((()=>{this.graphic.three.particle.fadeOut()}),2400):setTimeout((()=>{e===this.sceneIndex&&this.message.show(e+1)}),3600),yield this.scenes[e]({graphic:this.graphic,mask:this.mask,architecture:this.architecture}),this.isMoving=!1,yield pe(1800),!this.isLastScene()&&this.pageState.isEntered&&this.autoplay()}))}leaveArchitecture(){return Xi(this,void 0,void 0,(function*(){yield Promise.all([fe.p8.to(this.graphic.three.camera.polar,{y:120,r:10,angle:-531,duration:6,ease:"power3.in"}).then(),fe.p8.to(this.graphic.three.camera.lookAt,{z:38,y:92,duration:6,ease:"power3.in"}).then()])}))}addGui(){this.hasGui||(this.hasGui=!0,gt.add((e=>{const t=e.addFolder("Philosophy"),i={autoplay:!0,Scene00:()=>this.toScene(0),Scene01:()=>this.toScene(1),Scene02:()=>this.toScene(2),Scene03:()=>this.toScene(3),Scene04:()=>this.toScene(4),Scene05:()=>this.toScene(5),SceneEntry:()=>this.toScene(6)};t.add(i,"autoplay").onChange((()=>{this.shouldAutoplay=i.autoplay,i.autoplay&&(this.cancelAutoplay(),this.autoplay())})),t.add(i,"Scene00"),t.add(i,"Scene01"),t.add(i,"Scene02"),t.add(i,"Scene03"),t.add(i,"Scene04"),t.add(i,"Scene05"),t.add(i,"SceneEntry")})))}},[A]:class extends mi{constructor(e){super(e),this.heroElement=(Zi||(Zi=new Ui),Zi)}onPreload(){const e=se();return[Xe(this.heroElement.buildImagePath(e.suffix))]}onMounted(e){return t=this,i=void 0,n=function*(){return Ai().update(e),oe().isMobile&&this.heroElement.create(e),Promise.resolve()},new((s=void 0)||(s=Promise))((function(e,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function r(e){try{l(n.throw(e))}catch(e){o(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(a,r)}l((n=n.apply(t,i||[])).next())}));var t,i,s,n}createHeroHeader(e){oe().isMobile||(this.heroes.header=new Wi(this.heroElement.create(e)))}},[O]:class extends mi{constructor(e){super(e),this.heading=null,this.listener=new Me,this.slider=null,this.pageState.showParticle=!1}onMounted(e){return t=this,i=void 0,n=function*(){this.heading?this.heading.updateElement(e):this.heading=new Ji(e);const t=e.querySelector(".hero-image");if(t){const e=ue(t);e&&(yield Xe(e))}},new((s=void 0)||(s=Promise))((function(e,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function r(e){try{l(n.throw(e))}catch(e){o(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(a,r)}l((n=n.apply(t,i||[])).next())}));var t,i,s,n}onEntered(e){const t=Array.from(e.querySelectorAll(".gallery-button"));return t.length?(this.slider||(this.slider=new Oi(e)),this.slider.create(e),t.forEach(((e,t)=>{this.listener.on(e,"click",(()=>{var e;null===(e=this.slider)||void 0===e||e.open(t)}))})),Promise.resolve()):Promise.resolve()}onDestroy(){this.listener.clear()}onResize(){this.heading&&this.heading.resize()}onScroll(e){this.heading&&this.heading.scroll(e.detail.scroll.y)}createHeroHeader(e){if(oe().isMobile)return;const t=e.querySelector(".hero-image");t&&(this.heroes.header=new Ki(t))}},[_]:class extends mi{constructor(e){super(e),this.sticky=null,this.toc=null}onPreload(){const e=se();return[Xe(`${Q}/about/about_hero_${e.suffix}.jpg`)]}onMounted(e){if(this.mountImage(),!se().isSmall){const t=e.querySelector(".l-content"),i=e.querySelector(".l-content-summary");t&&i&&(this.sticky=new Bt(t,i)),this.toc=new Gt(e)}return Promise.resolve()}onDestroy(){this.sticky&&this.sticky.off(),this.toc&&this.toc.off()}mountImage(){["awards","exhibitions","essay"].forEach((e=>{const t=document.querySelector(`.section-${e}`);if(!t)return;const i=document.createElement("img");i.classList.add("c-about-blur-image",`c-about-blur-image-${e}`,"c-relax"),i.dataset.relaxY="-0.15,0.15",i.src=`${Q}/about/about_${e}.png`,t.appendChild(i)}))}},[I]:class extends mi{constructor(e){super(e),this.sticky=null,this.toc=null}onPreload(){const e=se();return[Xe(`${Q}/company/company_hero_${e.suffix}.jpg`)]}onMounted(e){if(!se().isSmall){const t=e.querySelector(".l-content"),i=e.querySelector(".l-content-summary");t&&i&&(this.sticky=new Bt(t,i)),this.toc=new Gt(e)}return Promise.resolve()}onEntered(){return setTimeout((()=>{void 0===window.initMap?(window.initMap=()=>{gi()},((e,{async:t=!1}={})=>{var i;const s=document.createElement("script");s.src=e,t&&(s.async=!0);const n=document.getElementsByTagName("script")[0];null===(i=null==n?void 0:n.parentNode)||void 0===i||i.insertBefore(s,n)})("https://maps.googleapis.com/maps/api/js?key=AIzaSyCkGlXIT9XrrDehFj-Ln1YNjbc5Iw53MJI&callback=initMap&v=weekly",{async:!0})):gi()}),1e3),Promise.resolve()}onDestroy(){this.sticky&&this.sticky.off(),this.toc&&this.toc.off()}},[z]:class extends mi{constructor(e){super(e),this.sticky=null}onPreload(){const e=se();return[Xe(`${Q}/careers/careers_hero_${e.suffix}.jpg`)]}onMounted(e){return t=this,i=void 0,o=function*(){if(!se().isSmall){const t=e.querySelector(".l-content"),i=e.querySelector(".l-content-summary");t&&i&&(this.sticky=new Bt(t,i))}return function(e){const t=Array.from(e.querySelectorAll(".job-item"));t.length&&t.forEach((e=>{const t=e.querySelector(".job-name"),i=e.querySelector(".job-detail"),n=e.querySelector(".job-detail-content"),o=()=>e.classList.contains(s);if(!t||!i||!n)return;const a=()=>{return t=this,a=void 0,l=function*(){const t=n.clientHeight;o()?(i.style.height=`${t}px`,e.classList.remove(s),yield pe(16),i.style.height="0px"):(e.classList.add(s),yield pe(16),i.style.height=`${t}px`)},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{o(l.next(e))}catch(e){i(e)}}function n(e){try{o(l.throw(e))}catch(e){i(e)}}function o(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(s,n)}o((l=l.apply(t,a||[])).next())}));var t,a,r,l};t.addEventListener("click",(()=>{a()})),i.addEventListener("transitionend",(()=>{o()?i.style.height="auto":i.style.height=""}))}))}(e),Promise.resolve()},new((n=void 0)||(n=Promise))((function(e,s){function a(e){try{l(o.next(e))}catch(e){s(e)}}function r(e){try{l(o.throw(e))}catch(e){s(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(a,r)}l((o=o.apply(t,i||[])).next())}));var t,i,n,o}onDestroy(){this.sticky&&this.sticky.off()}},[T]:class extends mi{onMounted(e){return t=this,i=void 0,n=function*(){return Ai().update(e),Promise.resolve()},new((s=void 0)||(s=Promise))((function(e,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function r(e){try{l(n.throw(e))}catch(e){o(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(a,r)}l((n=n.apply(t,i||[])).next())}));var t,i,s,n}},[Y]:class extends mi{constructor(e){super(e),this.sticky=null,this.pageState.showParticle=!1}onMounted(e){if(!se().isSmall){const t=e.querySelector(".l-content"),i=e.querySelector(".l-content-summary");t&&i&&(this.sticky=new Bt(t,i))}return Promise.resolve()}onDestroy(){this.sticky&&this.sticky.off()}},[j]:class extends mi{constructor(e){super(e),this.handleOpenModal=()=>{this.el.video&&this.el.video.pause()},this.handleCloseModal=()=>{this.el.video&&this.el.video.play()},this.el={trailer:null,video:null},this.listener=new Me,this.isTrailerVisible=!1}onPreload(){const e=se();return[Xe(`${Q}/movie/movie_hero_${e.suffix}.jpg`)]}onMounted(e){return _i(this,void 0,void 0,(function*(){return Ai().update(e),this.on(),Promise.resolve()}))}onEntered(e){return _i(this,void 0,void 0,(function*(){if(this.appendVideo(),yield pe(800),oe().isMobile){const t=e.querySelector(".c-large-hero-image");t&&t.classList.add(r)}else this.heroes.header&&this.heroes.header.fadeOut(1.2);this.fadeInVideo()}))}onDestroy(){this.off()}onScroll(e){this.el.trailer&&!oe().isMobile&&(this.el.trailer.style.transform=`translateY(${-e.detail.scroll.y}px)`)}on(){this.listener.on(window,y,this.handleOpenModal),this.listener.on(window,g,this.handleOpenModal),this.listener.on(window,w,this.handleCloseModal),this.listener.on(window,f,this.handleCloseModal)}off(){this.listener.clear()}appendVideo(){if(this.el.trailer=document.querySelector(".l-page-independence .trailer"),!this.el.trailer)return;const e=(se().isSmall?this.el.trailer.dataset.videoSp:this.el.trailer.dataset.videoPc)||"",t=document.createElement("video");t.src=e,t.muted=!0,t.loop=!0,t.playsInline=!0,this.el.trailer.appendChild(t),this.el.video=t}fadeInVideo(){this.el.trailer&&this.el.video&&(this.isTrailerVisible=!0,this.el.trailer.classList.add(s),this.el.video.currentTime=1.7,setTimeout((()=>{this.el.video&&this.el.video.play()}),700))}},[B]:class extends mi{constructor(e){super(e),this.listener=new Me,this.slider=null}onPreload(){const e=se();return[Xe(`${Q}/movie/movie_hero_${e.suffix}.jpg`)]}onMounted(e){return t=this,i=void 0,n=function*(){return Ai().update(e),Promise.resolve()},new((s=void 0)||(s=Promise))((function(e,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function r(e){try{l(n.throw(e))}catch(e){o(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(a,r)}l((n=n.apply(t,i||[])).next())}));var t,i,s,n}onEntered(e){const t=Array.from(e.querySelectorAll(".archive-button"));return t.length?(this.slider||(this.slider=new Oi(e)),this.slider.create(e),t.forEach(((e,t)=>{this.listener.on(e,"click",(()=>{var e;null===(e=this.slider)||void 0===e||e.open(t)}))})),Promise.resolve()):Promise.resolve()}onDestroy(){this.listener.clear()}},[U]:class extends mi{onMounted(e){return function(e){const t=e.querySelector("#tel");t&&t.setAttribute("type","tel")}(e),function(e){const t=e.querySelectorAll(".mwform-radio-field-text"),i=e.querySelectorAll(".mwform-checkbox-field-text");t.forEach((e=>{const t=document.createElement("span");t.classList.add("form-radio-icon"),Si(e,t)})),i.forEach((e=>{const t=document.createElement("span");t.classList.add("form-checkbox-icon"),Si(e,t)}))}(e),function(e){const t="ja"===document.documentElement.getAttribute("lang")?"ja":"en",i=e.querySelector(".l-content-body form");if(!i)return;const s=document.querySelector('[name="privacy_policy_consent[data][]"]'),n=[{name:"request_type",label:Ei(i,"request_type"),validators:[wi]},{name:"name",label:Ei(i,"name"),validators:[wi]},{name:"email",label:Ei(i,"email"),validators:[wi,xi]},{name:"tel",label:Ei(i,"tel"),validators:[bi]},{name:"message",label:Ei(i,"message"),validators:[wi]},{name:"privacy_policy_consent[data][]",label:s?s.value:"",validators:[wi]}],o=new yi(i,n,t);let a=!1;i.addEventListener("submit",(e=>{if(!a)if(o.validate(),o.hasError()){e.preventDefault();const t=document.querySelector(".form-error.is-visible");t&&t.closest(".form-control")&&kt().scrollTo(t)}else a=!0}))}(e),Promise.resolve()}},[Z]:class extends mi{},[K]:class extends mi{}},ts=Object.keys(Qi),is=Object.keys(es);class ss{constructor(){this.pages={}}postTypeToPageScope(e){return"project"===e?O:Y}normalizePath(e){let t=e;return t.includes("//")&&(/^\/\//.test(t)&&(t=`${new URL(location.href).protocol}${t}`),t=new URL(t).pathname),t}getInstance(e,t){const i=this.normalizePath(t);if(this.pages[i])return this.pages[i];if(!re(ts,e))return this.pages[i]=new es["not-found"]({pageScope:L}),this.pages[i];const{route:s}=zt(),{isPreview:n,postType:o}=s().preview,a=n?this.postTypeToPageScope(o):Qi[e];return re(is,a)?(this.pages[i]=new es[a]({pageScope:a}),this.pages[i]):(this.pages[i]=new es["not-found"]({pageScope:L}),this.pages[i])}}const ns=[{path:"/:lang(en)?/",name:P},{path:"/:lang(en)?/project",name:A},{path:"/:lang(en)?/project/page/:page",name:k},{path:"/:lang(en)?/project/category/:id",name:M},{path:"/:lang(en)?/project/category/:id/page/:page",name:C},{path:"/:lang(en)?/project/:id",name:O},{path:"/:lang(en)?/about",name:_},{path:"/:lang(en)?/company",name:I},{path:"/:lang(en)?/careers",name:z},{path:"/:lang(en)?/news",name:T},{path:"/:lang(en)?/news/page/:page",name:q},{path:"/:lang(en)?/news/category/:id",name:R},{path:"/:lang(en)?/news/category/:id/page/:page",name:D},{path:"/:lang(en)?/news/:id",name:Y},{path:"/:lang(en)?/movie",name:j},{path:"/:lang(en)?/movie/page/:page",name:F},{path:"/:lang(en)?/movie/category/:id",name:$},{path:"/:lang(en)?/movie/category/:id/page/:page",name:H},{path:"/:lang(en)?/gallery",name:B},{path:"/:lang(en)?/gallery/page/:page",name:G},{path:"/:lang(en)?/gallery/category/:id",name:V},{path:"/:lang(en)?/gallery/category/:id/page/:page",name:N},{path:"/:lang(en)?/gallery/tag/:id",name:X},{path:"/:lang(en)?/gallery/tag/:id/page/:page",name:W},{path:"/:lang(en)?/contact",name:U},{path:"/:lang(en)?/contact/complete",name:Z},{path:"/:lang(en)?/privacy-policy",name:K}];var os=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};class as{constructor(){this.leave=e=>os(this,void 0,void 0,(function*(){const{current:t,next:i}=e,s=this.getPageInstance(t);this.getPageInstance(i).preload(!1),yield s.leave(t.container)})),this.enter=e=>os(this,void 0,void 0,(function*(){var t;const{next:i}=e,s=this.parseScope(i.container),n=this.getPageInstance(i),{changeRoute:o}=zt();if(!s)throw new Error("container に data-page-scope が設定されていません");document.documentElement.dataset.pageScope=s,o((null===(t=i.route)||void 0===t?void 0:t.name)||"",i.url.path||"",s),yield n.enter(i.container,s,!1)})),this.after=e=>{!function(e){const t=document.head,i=e.match(/<head[^>]*>([\s\S.]*)<\/head>/i);if(!i)return;const s=i[0],n=document.createElement("head");n.innerHTML=s,["ja","en-US"].forEach((e=>{const t=Array.from(document.querySelectorAll(`.c-nav-lang-link[hreflang="${e}"]`)),i=n.querySelector(`link[rel="alternate"][hreflang="${e}"]`);t.length&&i&&t.forEach((e=>{e.setAttribute("href",i.href)}))}));const o=['meta[name="keywords"]','meta[name="description"]','meta[property^="og"]','meta[name^="twitter"]','link[rel="prev"]','link[rel="next"]','link[rel="canonical"]','link[rel="alternate"]'].join(","),a=t.querySelectorAll(o);for(let e=0;e<a.length;e++)t.removeChild(a[e]);const r=n.querySelectorAll(o);for(let e=0;e<r.length;e++)t.appendChild(r[e])}(e.next.html),"function"==typeof ga&&(ga("set","page",window.location.pathname),ga("send","pageview"))},this.pageGenerator=new ss}init(){Dt().use(jt(),{routes:ns}),Dt().init({timeout:1e4,cacheIgnore:["/contact/","/en/contact/","/contact/complete/","/en/contact/complete/"],transitions:[{name:"default-transition",leave:e=>os(this,void 0,void 0,(function*(){yield this.leave(this.formatTransitionData(e))})),enter:e=>os(this,void 0,void 0,(function*(){yield this.enter(this.formatTransitionData(e))}))}]})}formatTransitionData(e){if(!e)throw new Error("Transitionのデータが存在しません");return e}hooks(){Dt().hooks.after((e=>{this.after(this.formatTransitionData(e))}))}first(e,t){return os(this,void 0,void 0,(function*(){const i=this.getPageInstance(t),s=this.parseScope(e);document.documentElement.dataset.pageScope=s,yield i.enter(e,s,!0)}))}preload(e){return os(this,void 0,void 0,(function*(){const t=this.getPageInstance(e);yield t.preload(!0)}))}parseScope(e){return e.dataset.pageScope||""}getPageInstance(e){var t;if(!e.url.path)throw new Error("pathを取得できませんでした");return this.pageGenerator.getInstance((null===(t=e.route)||void 0===t?void 0:t.name)||"",e.url.path)}resolveUrl(e,t){const i=jt().resolveUrl(e),s=Dt().url.parse(location.href);if(!s)throw new Error("URLをパースできませんでした");return{container:t,html:"",namespace:"",url:Object.assign({href:location.href},s),route:i}}}function rs(){var e,t,i,s,n;return t=this,i=void 0,n=function*(){const t=xt||(xt=new wt,xt),i=St||(St=new bt,St);if(!t.isVisited()&&(t.setVisited(),!i.isSameLang()))return void i.redirect(i.browser());const s=document.querySelector(".l-page");if(!s)throw new Error("ページのコンテナ（.l-page）が見つかりません");fe.p8.registerPlugin(Tt._Z),fe.p8.registerPlugin(qt.L),fe.p8.defaults({overwrite:"auto"}),function(){const e=oe(),t=e.isMobile?"mobile":"desktop";document.documentElement.dataset.device=t,document.documentElement.dataset.browser=e.browser.app,document.documentElement.dataset.os=e.device.os}(),function(){const e=se();document.documentElement.style.setProperty("--first-vh",`${e.canvas.height}px`),document.documentElement.style.setProperty("--vh-on-transition",`${e.height}px`)}(),ae(),window.addEventListener(d,(()=>ae())),oe().isMobile?(document.body.addEventListener("touchstart",(e=>Ct(e,x))),document.body.addEventListener("touchmove",(e=>Ct(e,b))),document.body.addEventListener("touchend",(e=>Ct(e,S)))):(document.body.addEventListener("mouseenter",(e=>Ot(e,x))),document.body.addEventListener("mousemove",(e=>Ot(e,b))),document.body.addEventListener("mouseleave",(e=>Ot(e,S))));const{route:n,changeRoute:o}=zt(),a=new as;a.init();const r=a.parseScope(s),l=a.resolveUrl(location.href,s);o((null===(e=l.route)||void 0===e?void 0:e.name)||"",l.url.path||"",r),je();const h=mt(),u=kt(),p=Se();h.init();const m=new ve,v=document.querySelector(".l-header-container");v&&m.update(v),yield a.preload(l),yield pe(16),n().isPhilosophy&&!n().preview.isPreview||(u.unlock(),yield pe(1e3),p.hideAtSecondary(),yield pe(1500)),a.first(s,l),a.hooks(),window.addEventListener(c,(()=>{const e=document.querySelector(".l-stage");e&&(e.style.visibility="hidden"),location.reload()})),ft.addControl(h)},new((s=void 0)||(s=Promise))((function(e,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function r(e){try{l(n.throw(e))}catch(e){o(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(a,r)}l((n=n.apply(t,i||[])).next())}))}document.addEventListener("DOMContentLoaded",(()=>{rs()}))}},i={};function s(e){var n=i[e];if(void 0!==n)return n.exports;var o=i[e]={exports:{}};return t[e].call(o.exports,o,o.exports,s),o.exports}s.m=t,e=[],s.O=function(t,i,n,o){if(!i){var a=1/0;for(c=0;c<e.length;c++){i=e[c][0],n=e[c][1],o=e[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&o||a>=o)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(r=!1,o<a&&(a=o));if(r){e.splice(c--,1);var h=n();void 0!==h&&(t=h)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,n,o]},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={339:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,o,a=i[0],r=i[1],l=i[2],h=0;for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(l)var c=l(s);for(t&&t(i);h<a.length;h++)o=a[h],s.o(e,o)&&e[o]&&e[o][0](),e[a[h]]=0;return s.O(c)},i=self.webpackChunkprojects=self.webpackChunkprojects||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var n=s.O(void 0,[643],(function(){return s(827)}));n=s.O(n)}();